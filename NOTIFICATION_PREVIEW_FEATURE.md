# ููุฒุฉ ูุนุงููุฉ ุงูุชุฐูุฑุฉ ูู ุงูุฅุดุนุงุฑุงุช - Notification Ticket Preview Feature

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ููุฒุฉ ุฌุฏูุฏุฉ ูุฅุถุงูุฉ ุฃููููุฉ ูุนุงููุฉ ุงูุชุฐูุฑุฉ ูู ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช ุงูุนูููุฉุ ููุง ูุณูุญ ูููุณุชุฎุฏููู ุจุงูุงูุชูุงู ูุจุงุดุฑุฉ ุฅูู ุงูุชุฐูุฑุฉ ูู ุตูุญุฉ ุงููุงูุจุงู.

## ุงูููุฒุงุช ุงููุทุจูุฉ

### 1. **ุฃููููุฉ ูุนุงููุฉ ุงูุชุฐูุฑุฉ** ๐๏ธ
- โ **ุฃููููุฉ ุฌูููุฉ**: ุฃููููุฉ ุนูู ุฎุถุฑุงุก ูููุนุงููุฉ
- โ **ุธููุฑ ุดุฑุทู**: ุชุธูุฑ ููุท ููุฅุดุนุงุฑุงุช ุงูุชู ุชุญุชูู ุนูู ุฑูุงุจุท ุชุฐุงูุฑ ุตุญูุญุฉ
- โ **ุชูุงุนู ุณูุณ**: ุชุฃุซูุฑุงุช hover ูุฃููุงู ูุชูุงุณูุฉ

### 2. **ุชุญููู ุงูุฑูุงุจุท ุงูุฐูู**
- โ **ูู**: `/tickets/4082b407-a374-429a-82eb-f624a63e56c4`
- โ **ุฅูู**: `http://localhost:8080/kanban?ticket=4082b407-a374-429a-82eb-f624a63e56c4`
- โ **ุฏููุงูููู**: ูุญุตู ุนูู ุงูุฑุงุจุท ุงูุฃุณุงุณู ุชููุงุฆูุงู ูู ุงููุชุตูุญ

### 3. **ุฏุนู ุฌููุน ุงูุจูุฆุงุช**
- โ **localhost:8080** - ุจูุฆุฉ ุงูุชุทููุฑ ุงููุญููุฉ
- โ **127.0.0.1:8080** - ุนููุงู IP ุงููุญูู
- โ **ุฃู ุฏูููู** - ูุนูู ูุน ุฃู ุฑุงุจุท ุฃุณุงุณู

## ุงูุจููุฉ ุงูุชูููุฉ

### 1. **urlHelper.ts** - ุฏุงูุงุช ูุณุงุนุฏุฉ ููุฑูุงุจุท
```typescript
// ุงูุญุตูู ุนูู ุงูุฑุงุจุท ุงูุฃุณุงุณู ุชููุงุฆูุงู
export const getBaseUrl = (): string => {
  if (typeof window !== 'undefined') {
    return `${window.location.protocol}//${window.location.host}`;
  }
  return 'http://localhost:8080'; // fallback
};

// ุชุญููู ุฑุงุจุท ุงูุชุฐูุฑุฉ ุฅูู ุฑุงุจุท ูุงูุจุงู
export const convertToKanbanUrl = (actionUrl: string): string => {
  const ticketIdMatch = actionUrl.match(/\/tickets\/([a-f0-9-]+)/i);
  if (!ticketIdMatch) return '';
  
  const ticketId = ticketIdMatch[1];
  const baseUrl = getBaseUrl();
  
  return `${baseUrl}/kanban?ticket=${ticketId}`;
};

// ูุชุญ ุฑุงุจุท ุงูุชุฐูุฑุฉ
export const openTicketUrl = (actionUrl: string, openInNewTab: boolean = false): void => {
  const kanbanUrl = convertToKanbanUrl(actionUrl);
  if (!kanbanUrl) return;
  
  if (openInNewTab) {
    window.open(kanbanUrl, '_blank');
  } else {
    window.location.href = kanbanUrl;
  }
};

// ุงูุชุญูู ูู ุตุญุฉ ุฑุงุจุท ุงูุชุฐูุฑุฉ
export const isValidTicketUrl = (actionUrl: string): boolean => {
  if (!actionUrl) return false;
  return /\/tickets\/[a-f0-9-]+/i.test(actionUrl);
};
```

### 2. **NotificationBell.tsx** - ูููู ุงูุฅุดุนุงุฑุงุช ุงููุญุฏุซ
```tsx
// ุฅุถุงูุฉ ุฃููููุฉ ูุนุงููุฉ ุงูุชุฐูุฑุฉ
{notification.action_url && isValidTicketUrl(notification.action_url) && (
  <button
    onClick={() => handleViewTicket(notification.action_url!)}
    className="p-1 text-green-600 hover:bg-green-100 rounded transition-colors"
    title="ูุนุงููุฉ ุงูุชุฐูุฑุฉ"
  >
    <Eye className="w-4 h-4" />
  </button>
)}

// ุฏุงูุฉ ุงูุชุนุงูู ูุน ุงูููุฑ
const handleViewTicket = (actionUrl: string) => {
  if (isValidTicketUrl(actionUrl)) {
    openTicketUrl(actionUrl, false); // ูุชุญ ูู ููุณ ุงููุงูุฐุฉ
    setIsOpen(false); // ุฅุบูุงู ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช
  }
};
```

### 3. **notificationService.ts** - ุชุญุฏูุซ ููุน ุงูุจูุงูุงุช
```typescript
export interface Notification {
  id: string;
  user_id: string;
  title: string;
  message: string;
  type: 'info' | 'success' | 'warning' | 'error';
  is_read: boolean;
  data?: Record<string, any>;
  action_url?: string;  // โ ูุถุงู
  url?: string;         // โ ูุถุงู
  created_at: string;
  read_at?: string;
}
```

## ููููุฉ ุงูุนูู

### 1. **ุนุฑุถ ุงูุฅุดุนุงุฑ**
```
๐ ุชู ุฅุณูุงุฏู ุฅูู ุชุฐูุฑุฉ ุฌุฏูุฏุฉ
ุชู ุฅุณูุงุฏู ุฅูู ุงูุชุฐูุฑุฉ: "ุงุฎุชุจุงุฑ ุงููุธุงู"
๐ค ุงูุฏูุฑ: ูุทูุฑ
๐ ุจูุงุณุทุฉ: Admin User
ููุฐ 5 ุฏูุงุฆู                    [๐๏ธ] [โ] [๐๏ธ]
```

### 2. **ุงูููุฑ ุนูู ุฃููููุฉ ุงููุนุงููุฉ**
1. **ุงูุชุญูู**: ูู `action_url` ููุฌูุฏ ูุตุญูุญุ
2. **ุงูุงุณุชุฎุฑุงุฌ**: ุงุณุชุฎุฑุงุฌ ูุนุฑู ุงูุชุฐูุฑุฉ ูู ุงูุฑุงุจุท
3. **ุงูุชุญููู**: ุชุญููู ุฅูู ุฑุงุจุท ูุงูุจุงู
4. **ุงููุชุญ**: ูุชุญ ุงูุฑุงุจุท ูู ููุณ ุงููุงูุฐุฉ
5. **ุงูุฅุบูุงู**: ุฅุบูุงู ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช

### 3. **ูุซุงู ุนูู ุงูุชุญููู**
```
ุงูุฑุงุจุท ุงูุฃุตูู: /tickets/4082b407-a374-429a-82eb-f624a63e56c4
โ
ูุนุฑู ุงูุชุฐูุฑุฉ: 4082b407-a374-429a-82eb-f624a63e56c4
โ
ุงูุฑุงุจุท ุงูุฃุณุงุณู: http://localhost:8080 (ุชููุงุฆู)
โ
ุงูุฑุงุจุท ุงูููุงุฆู: http://localhost:8080/kanban?ticket=4082b407-a374-429a-82eb-f624a63e56c4
```

## ุงูุงุฎุชุจุงุฑ

### 1. **ููู ุงูุงุฎุชุจุงุฑ ุงููุจุงุดุฑ**
```bash
# ูุชุญ ููู ุงูุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ
open test-url-helper.html
```

### 2. **ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ**
- โ **getBaseUrl()**: ุงูุญุตูู ุนูู ุงูุฑุงุจุท ุงูุฃุณุงุณู
- โ **convertToKanbanUrl()**: ุชุญููู ุฑุงุจุท ุงูุชุฐูุฑุฉ
- โ **isValidTicketUrl()**: ุงูุชุญูู ูู ุตุญุฉ ุงูุฑุงุจุท
- โ **openTicketUrl()**: ูุชุญ ุงูุฑุงุจุท

### 3. **ุงุฎุชุจุงุฑุงุช ูุฏููุฉ**
1. **ุฅูุดุงุก ุฅุดุนุงุฑ** ูุน `action_url`
2. **ูุชุญ ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช**
3. **ุงูุชุญูู ูู ุธููุฑ ุฃููููุฉ ุงููุนุงููุฉ** ๐๏ธ
4. **ุงูููุฑ ุนูู ุงูุฃููููุฉ**
5. **ุงูุชุฃูุฏ ูู ูุชุญ ุงูุชุฐูุฑุฉ** ูู ุงููุงูุจุงู

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ุฅุดุนุงุฑ ุฅุณูุงุฏ ุชุฐูุฑุฉ**
```json
{
  "title": "๐ ุชู ุฅุณูุงุฏู ุฅูู ุชุฐูุฑุฉ ุฌุฏูุฏุฉ",
  "message": "ุชู ุฅุณูุงุฏู ุฅูู ุงูุชุฐูุฑุฉ: \"ุชุทููุฑ ููุฒุฉ ุฌุฏูุฏุฉ\"",
  "action_url": "/tickets/4082b407-a374-429a-82eb-f624a63e56c4",
  "notification_type": "ticket_assigned"
}
```
**ุงููุชูุฌุฉ**: ุฃููููุฉ ูุนุงููุฉ ุชุธูุฑ โ

### 2. **ุฅุดุนุงุฑ ุชุนููู ูุฑุงุฌุน**
```json
{
  "title": "๐ ุชู ุชุนูููู ููุฑุงุฌุน ูุชุฐูุฑุฉ",
  "message": "ุชู ุชุนูููู ููุฑุงุฌุน ููุชุฐูุฑุฉ: \"ูุฑุงุฌุนุฉ ุงูููุฏ\"",
  "action_url": "/tickets/abc123-def456-ghi789",
  "notification_type": "ticket_review_assigned"
}
```
**ุงููุชูุฌุฉ**: ุฃููููุฉ ูุนุงููุฉ ุชุธูุฑ โ

### 3. **ุฅุดุนุงุฑ ุนุงู ุจุฏูู ุฑุงุจุท**
```json
{
  "title": "๐ข ุฅุนูุงู ุนุงู",
  "message": "ุชู ุชุญุฏูุซ ุงููุธุงู ุจูุฌุงุญ",
  "notification_type": "info"
}
```
**ุงููุชูุฌุฉ**: ุฃููููุฉ ูุนุงููุฉ ูุง ุชุธูุฑ โ

## ุงููููุงุช ุงููุถุงูุฉ/ุงููุญุฏุซุฉ

### 1. **ูููุงุช ุฌุฏูุฏุฉ**
- `src/utils/urlHelper.ts` - ุฏุงูุงุช ูุณุงุนุฏุฉ ููุฑูุงุจุท
- `test-url-helper.html` - ุตูุญุฉ ุงุฎุชุจุงุฑ ุชูุงุนููุฉ
- `NOTIFICATION_PREVIEW_FEATURE.md` - ูุฐุง ุงูุชูุซูู

### 2. **ูููุงุช ูุญุฏุซุฉ**
- `src/components/notifications/NotificationBell.tsx` - ุฅุถุงูุฉ ุฃููููุฉ ุงููุนุงููุฉ
- `src/services/notificationService.ts` - ุชุญุฏูุซ ููุน ุงูุจูุงูุงุช

## ุงููููุฒุงุช

### โ **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**
- **ุณูููุฉ ุงููุตูู**: ููุฑุฉ ูุงุญุฏุฉ ููุงูุชูุงู ุฅูู ุงูุชุฐูุฑุฉ
- **ุชุตููู ูุชูุงุณู**: ุฃููููุฉ ุฌูููุฉ ููุชูุงุณูุฉ ูุน ุงูุชุตููู
- **ุชูุงุนู ุณูุณ**: ุชุฃุซูุฑุงุช ุจุตุฑูุฉ ุฌูููุฉ

### โ **ุงููุฑููุฉ ุงูุชูููุฉ**
- **ุฏููุงูููู**: ูุนูู ูุน ุฃู ุฑุงุจุท ุฃุณุงุณู
- **ุขูู**: ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูุงุจุท ูุจู ุงููุชุญ
- **ูุงุจู ููุตูุงูุฉ**: ููุฏ ููุธู ูููุตูู

### โ **ุงูุชูุงูู**
- **ุฌููุน ุงููุชุตูุญุงุช**: ูุนูู ูุน ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- **ุฌููุน ุงูุจูุฆุงุช**: ุชุทููุฑุ ุงุฎุชุจุงุฑุ ุฅูุชุงุฌ
- **ุฌููุน ุงูุฃุฌูุฒุฉ**: ุณุทุญ ุงูููุชุจ ูุงูุฌูุงู

## ุงูุงุณุชุฎุฏุงู ูู ุงูููุฏ

### 1. **ุงุณุชูุฑุงุฏ ุงูุฏุงูุงุช**
```typescript
import { openTicketUrl, isValidTicketUrl } from '../utils/urlHelper';
```

### 2. **ุงูุชุญูู ูู ุงูุฑุงุจุท**
```typescript
if (notification.action_url && isValidTicketUrl(notification.action_url)) {
  // ุนุฑุถ ุฃููููุฉ ุงููุนุงููุฉ
}
```

### 3. **ูุชุญ ุงูุชุฐูุฑุฉ**
```typescript
const handleViewTicket = (actionUrl: string) => {
  openTicketUrl(actionUrl, false); // ูุชุญ ูู ููุณ ุงููุงูุฐุฉ
  // ุฃู
  openTicketUrl(actionUrl, true);  // ูุชุญ ูู ุชุจููุจ ุฌุฏูุฏ
};
```

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ๐ **ุฅููุงููุงุช ุฅุถุงููุฉ**
- **ุฎูุงุฑ ูุชุญ ูู ุชุจููุจ ุฌุฏูุฏ**: ุฅุถุงูุฉ ุฎูุงุฑ ูููุณุชุฎุฏู
- **ูุนุงููุฉ ุณุฑูุนุฉ**: ุนุฑุถ ูุนูููุงุช ุงูุชุฐูุฑุฉ ูู ูุงูุฐุฉ ููุจุซูุฉ
- **ุชุงุฑูุฎ ุงูุฅุดุนุงุฑุงุช**: ุฑุจุท ุงูุฅุดุนุงุฑุงุช ุจุชุงุฑูุฎ ุงูุชุฐุงูุฑ
- **ุฅุดุนุงุฑุงุช ุงูููุช ุงููุนูู**: ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูุชุฐูุฑุฉ

### ๐จ **ุชุญุณููุงุช ุงูุชุตููู**
- **ุฃููููุงุช ูุชุญุฑูุฉ**: ุงููููุดู ุนูุฏ hover
- **ุฃููุงู ุญุณุจ ุงูููุน**: ุฃููุงู ูุฎุชููุฉ ุญุณุจ ููุน ุงูุฅุดุนุงุฑ
- **ุฃุญุฌุงู ูุชุฌุงูุจุฉ**: ุชููู ูุน ุฃุญุฌุงู ุงูุดุงุดุงุช ุงููุฎุชููุฉ

## ุงูุฃูุงู ูุงูุฃุฏุงุก

### ๐ **ุงูุฃูุงู**
- โ **ุงูุชุญูู ูู ุงูุฑูุงุจุท**: ููุท ุงูุฑูุงุจุท ุงูุตุญูุญุฉ ุชููุชุญ
- โ **ููุน XSS**: ุชูุธูู ุงููุฏุฎูุงุช ูุจู ุงููุนุงูุฌุฉ
- โ **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช**: ููุท ุงููุฎูููู ูุฑูู ุงูุฅุดุนุงุฑุงุช

### โก **ุงูุฃุฏุงุก**
- โ **ุชุญููู ุณุฑูุน**: ุฏุงูุงุช ุฎูููุฉ ูุณุฑูุนุฉ
- โ **ุฐุงูุฑุฉ ูุญุณูุฉ**: ูุง ุชูุฌุฏ ุชุณุฑูุจุงุช ูู ุงูุฐุงูุฑุฉ
- โ **ุงุณุชุฌุงุจุฉ ููุฑูุฉ**: ุชูุงุนู ุณุฑูุน ูุน ุงูููุฑุงุช

## ุงูุฏุนู ุงูููู

### ๐ **ุงููุดุงูู ุงูุดุงุฆุนุฉ**

#### 1. **ุงูุฃููููุฉ ูุง ุชุธูุฑ**
- **ุงูุณุจุจ**: `action_url` ุบูุฑ ููุฌูุฏ ุฃู ุบูุฑ ุตุญูุญ
- **ุงูุญู**: ุชุฃูุฏ ูู ูุฌูุฏ `action_url` ุจุงูุชูุณูู ุงูุตุญูุญ

#### 2. **ุงูุฑุงุจุท ูุง ููุชุญ**
- **ุงูุณุจุจ**: ุฎุทุฃ ูู ุงุณุชุฎุฑุงุฌ ูุนุฑู ุงูุชุฐูุฑุฉ
- **ุงูุญู**: ุชุญูู ูู ุชูุณูู ุงูุฑุงุจุท `/tickets/{uuid}`

#### 3. **ูุชุญ ูู ุตูุญุฉ ุฎุงุทุฆุฉ**
- **ุงูุณุจุจ**: ุฎุทุฃ ูู ุงูุฑุงุจุท ุงูุฃุณุงุณู
- **ุงูุญู**: ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ ูุงูุฎุงุฏู

### ๐ง **ุงูุชุดุฎูุต**
```javascript
// ูู console ุงููุชุตูุญ
console.log('Base URL:', getBaseUrl());
console.log('Kanban URL:', convertToKanbanUrl('/tickets/test-id'));
console.log('Is Valid:', isValidTicketUrl('/tickets/test-id'));
```

## ุณุฌู ุงูุชุบููุฑุงุช

### ุงูุฅุตุฏุงุฑ 1.0.0 (ุงูููู)
- โ **ุฅุถุงูุฉ ุฃููููุฉ ูุนุงููุฉ ุงูุชุฐูุฑุฉ**
- โ **ุชุญููู ุงูุฑูุงุจุท ุงูุฐูู**
- โ **ุฏุนู ุฌููุน ุงูุจูุฆุงุช**
- โ **ุงุฎุชุจุงุฑุงุช ุดุงููุฉ**
- โ **ุชูุซูู ูุงูู**

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: ูุฑูู ุชุทููุฑ Pipefy  
**ุงูุชุงุฑูุฎ**: ุฃูุชูุจุฑ 2024  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู

**ุงูุงุณุชุฎุฏุงู**:
1. ุงูุชุญ ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช ูู ุงูุฃุนูู
2. ุงุจุญุซ ุนู ุงูุฅุดุนุงุฑุงุช ุงูุชู ุชุญุชูู ุนูู ุฑูุงุจุท ุชุฐุงูุฑ
3. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนูู ๐๏ธ ูููุนุงููุฉ
4. ุณุชูุชูู ูุจุงุดุฑุฉ ุฅูู ุงูุชุฐูุฑุฉ ูู ุงููุงูุจุงู!
