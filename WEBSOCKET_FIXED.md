# โ ุชู ุฅุตูุงุญ WebSocket!

## ๐ง ุงููุดููุฉ ุงูุชู ุชู ุฅุตูุงุญูุง

ูุงู ููุงู ุฎุทุฃ ูู `src/services/socketService.ts` ุญูุซ ูุงู ูุญุงูู ุงูุงุชุตุงู ุจุงููููุฐ **3000** ุจุฏูุงู ูู **3004**:

### ูุจู ุงูุฅุตูุงุญ โ
```typescript
const serverUrl = window.location.hostname === 'localhost' 
  ? 'http://localhost:3000'  // โ ุฎุทุฃ
  : `http://${window.location.hostname}:3000`;  // โ ุฎุทุฃ
```

### ุจุนุฏ ุงูุฅุตูุงุญ โ
```typescript
const serverUrl = window.location.hostname === 'localhost' 
  ? 'http://localhost:3004'  // โ ุตุญูุญ
  : `http://${window.location.hostname}:3004`;  // โ ุตุญูุญ
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ ุงูุขู

### ุงูุฎุทูุฉ 1: ุชุฃูุฏ ูู ุชุดุบูู ุงูุฎูุงุฏู

ูุฌุจ ุฃู ูููู ูุฏูู:
- โ **Backend** ูุนูู ุนูู `http://192.168.56.1:3004`
- โ **Frontend** ูุนูู ุนูู `http://192.168.56.1:8080`

ููุชุญูู:
```powershell
# ุชุญูู ูู Backend
Invoke-WebRequest -Uri "http://192.168.56.1:3004/api/health"

# ุชุญูู ูู Frontend
Invoke-WebRequest -Uri "http://192.168.56.1:8080"
```

### ุงูุฎุทูุฉ 2: ุงูุชุญ ูุชุตูุญูู

1. **ุงููุชุตูุญ ุงูุฃูู:**
   - ุงูุชุญ `http://192.168.56.1:8080`
   - ุณุฌู ุฏุฎูู (ูููู ุงุณุชุฎุฏุงู admin@pipefy.com / admin123)
   - ุงูุชุญ Console (ุงุถุบุท F12)
   - ุงุฐูุจ ุฅูู ููุญุฉ ูุงูุจุงู
   - ุงุฎุชุฑ "ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ"

2. **ุงููุชุตูุญ ุงูุซุงูู:**
   - ุงูุชุญ ูุงูุฐุฉ ุฎููุฉ (Incognito/Private)
   - ุงูุชุญ `http://192.168.56.1:8080`
   - ุณุฌู ุฏุฎูู ุจููุณ ุงูุญุณุงุจ ุฃู ุญุณุงุจ ุขุฎุฑ
   - ุงูุชุญ Console (ุงุถุบุท F12)
   - ุงุฐูุจ ุฅูู ููุญุฉ ูุงูุจุงู
   - ุงุฎุชุฑ "ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ"

### ุงูุฎุทูุฉ 3: ุชุญูู ูู ุงูุงุชุตุงู ูู Console

ูู ููุง ุงููุชุตูุญููุ ูุฌุจ ุฃู ุชุฑู ูู Console:

```
๐ Connecting to WebSocket server: http://192.168.56.1:3004
โ WebSocket connected
๐ฅ Joining process: [process-id]
โ Joined process: [process-id]
```

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุฑ ุงูุชุญุฏูุซ ุงูููุฑู

#### ุงุฎุชุจุงุฑ ุฅูุดุงุก ุชุฐูุฑุฉ:
1. ูู **ุงููุชุตูุญ ุงูุฃูู**: ุงุถุบุท "ุชุฐูุฑุฉ ุฌุฏูุฏุฉ"
2. ุงููุฃ ุงูุจูุงูุงุช ูุงุญูุธ
3. ูู **ุงููุชุตูุญ ุงูุซุงูู**: ูุฌุจ ุฃู ุชุธูุฑ ุงูุชุฐูุฑุฉ **ููุฑุงู ุจุฏูู refresh**!
4. ูู Console ูุฌุจ ุฃู ุชุฑู: `๐จ Ticket created event received:`

#### ุงุฎุชุจุงุฑ ููู ุชุฐูุฑุฉ:
1. ูู **ุงููุชุตูุญ ุงูุฃูู**: ุงุณุญุจ ุชุฐูุฑุฉ ูู ูุฑุญูุฉ ูุฃุฎุฑู
2. ูู **ุงููุชุตูุญ ุงูุซุงูู**: ูุฌุจ ุฃู ุชุชุญุฑู ุงูุชุฐูุฑุฉ **ููุฑุงู**!
3. ูู Console ูุฌุจ ุฃู ุชุฑู: `๐จ Ticket moved event received:`

#### ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุชุฐูุฑุฉ:
1. ูู **ุงููุชุตูุญ ุงูุฃูู**: ุงูุชุญ ุชุฐูุฑุฉ ูุนุฏู ุจูุงูุงุชูุง
2. ูู **ุงููุชุตูุญ ุงูุซุงูู**: ูุฌุจ ุฃู ุชุชุญุฏุซ ุงูุจูุงูุงุช **ููุฑุงู**!
3. ูู Console ูุฌุจ ุฃู ุชุฑู: `๐จ Ticket updated event received:`

#### ุงุฎุชุจุงุฑ ุญุฐู ุชุฐูุฑุฉ:
1. ูู **ุงููุชุตูุญ ุงูุฃูู**: ุงุญุฐู ุชุฐูุฑุฉ
2. ูู **ุงููุชุตูุญ ุงูุซุงูู**: ูุฌุจ ุฃู ุชุฎุชูู ุงูุชุฐูุฑุฉ **ููุฑุงู**!
3. ูู Console ูุฌุจ ุฃู ุชุฑู: `๐จ Ticket deleted event received:`

## ๐ฏ ูุง ูุฌุจ ุฃู ูุญุฏุซ

### โ ุงูุณููู ุงูุตุญูุญ (Real-time):
- ุนูุฏ ุฅูุดุงุก ุชุฐูุฑุฉ โ **ุชุธูุฑ ููุฑุงู** ูู ุฌููุน ุงููุชุตูุญุงุช
- ุนูุฏ ููู ุชุฐูุฑุฉ โ **ุชุชุญุฑู ููุฑุงู** ูู ุฌููุน ุงููุชุตูุญุงุช
- ุนูุฏ ุชุญุฏูุซ ุชุฐูุฑุฉ โ **ุชุชุญุฏุซ ููุฑุงู** ูู ุฌููุน ุงููุชุตูุญุงุช
- ุนูุฏ ุญุฐู ุชุฐูุฑุฉ โ **ุชุฎุชูู ููุฑุงู** ูู ุฌููุน ุงููุชุตูุญุงุช
- **ูุง ุญุงุฌุฉ ููุงูุชูุงู ุจูู ุงูุชุจููุจุงุช ุฃู ุนูู Refresh**

### โ ุงูุณููู ุงููุฏูู (ูุจู ุงูุฅุตูุงุญ):
- ุงูุชุญุฏูุซุงุช ูุง ุชุธูุฑ ุฅูุง ุนูุฏ:
  - ุงูุงูุชูุงู ูุชุจููุจ ุขุฎุฑ ูุงูุนูุฏุฉ
  - ุนูู Refresh ููุตูุญุฉ (F5)

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุธูุฑ ุฑุณุงุฆู WebSocket ูู Console:

1. **ุชุญูู ูู Backend:**
```powershell
Invoke-WebRequest -Uri "http://192.168.56.1:3004/api/health"
```

2. **ุชุญูู ูู ุฃู Frontend ุชู ุฅุนุงุฏุฉ ุชุญูููู:**
   - ุงุถุบุท Ctrl+Shift+R ูุฅุนุงุฏุฉ ุชุญููู ูุงููุฉ
   - ุฃู ุงูุณุญ Cache ูุฃุนุฏ ุงูุชุญููู

3. **ุชุญูู ูู Console ููุฃุฎุทุงุก:**
   - ุงูุชุญ F12
   - ุงุจุญุซ ุนู ุฃุฎุทุงุก ุจุงูููู ุงูุฃุญูุฑ
   - ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ "Failed to connect"

4. **ุชุญูู ูู Token:**
   - ูู Console ุงูุชุจ: `localStorage.getItem('token')`
   - ูุฌุจ ุฃู ูุนูุฏ token ุตุญูุญ

### ุฅุฐุง ูุงู WebSocket ูุชุตู ููู ุงูุชุญุฏูุซุงุช ูุง ุชุตู:

1. **ุชุญูู ูู Process ID:**
   - ุชุฃูุฏ ูู ุฃู ููุง ุงููุชุตูุญูู ูู ููุณ ุงูุนูููุฉ
   - ูู Console ุงุจุญุซ ุนู: `Joined process: [id]`
   - ูุฌุจ ุฃู ูููู ุงูู ID ููุณู ูู ููุง ุงููุชุตูุญูู

2. **ุชุญูู ูู Backend Logs:**
   - ุงูุชุญ ูุงูุฐุฉ PowerShell ุญูุซ ูุนูู Backend
   - ุงุจุญุซ ุนู ุฑุณุงุฆู ูุซู:
     ```
     โ User [id] connected to WebSocket
     โ User [id] joined process [process-id]
     ๐ค Emitting ticket-created...
     ```

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

| ุงูููู | ุงูุชุบููุฑ | ุงูุณุจุจ |
|------|---------|-------|
| `src/services/socketService.ts` | ุชุบููุฑ ุงููููุฐ ูู 3000 ุฅูู 3004 | Backend ูุนูู ุนูู 3004 |

## ๐ ุงููุชูุฌุฉ

ุงูุขู ุงููุธุงู ูุนูู ุจุดูู **Real-time** ูุงูู! 

- โ ุชุญุฏูุซุงุช ููุฑูุฉ ุจูู ุฌููุน ุงููุณุชุฎุฏููู
- โ ูุง ุญุงุฌุฉ ููู Refresh
- โ ูุง ุญุงุฌุฉ ููุงูุชูุงู ุจูู ุงูุชุจููุจุงุช
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ููุชุฒุงููุฉ

---

**ููุงุญุธุฉ ูููุฉ:** ุฅุฐุง ููุช ุจุฅุนุงุฏุฉ ุชุดุบูู Backendุ ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุญููู ุตูุญุฉ Frontend (Ctrl+Shift+R) ูุฅุนุงุฏุฉ ุงูุงุชุตุงู ุจู WebSocket.

