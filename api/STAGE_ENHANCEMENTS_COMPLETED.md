# โ ุชู ุฅูุฌุงุฒ ุชุญุณููุงุช ุงููุฑุงุญู ุจูุฌุงุญ

## ๐ ุงูููุงู ุงููุทููุจุฉ
ุชู ุชุญุณูู ุงูู endpoint `/api/processes/frontend` ุจููุฒุชูู ุฃุณุงุณูุชูู:

1. **ุชูุงูู ุฃููุงุน ุงููุฑุงุญู**: ุฑุจุท ุฎุตุงุฆุต `is_initial` ู `is_final` ูุน ูุธุงู ุฃููุงุน ุงููุฑุงุญู
2. **ุชุฑุชูุจ ุงููุฑุงุญู**: ุชุทุจูู ุชุฑุชูุจ ุตุญูุญ ูููุฑุงุญู ุญุณุจ `order_index`

## ๐ง ุงูุชุญุณููุงุช ุงูููุฌุฒุฉ

### 1. ุชุฑุชูุจ ุงููุฑุงุญู (Stage Ordering)
**ุงููุดููุฉ**: ุงููุฑุงุญู ูู ุชูู ูุฑุชุจุฉ ุญุณุจ `order_index`
**ุงูุญู**: 
```javascript
// ุชุฑุชูุจ ุงููุฑุงุญู ุญุณุจ order_index
const sortedStages = process.stages ? 
  [...process.stages].sort((a, b) => (a.order_index || 0) - (b.order_index || 0)) : [];
```

**ุงููุชูุฌุฉ**: โ ุงููุฑุงุญู ุชูุฑุฌุน ูุฑุชุจุฉ ุจุดูู ุตุญูุญ (1, 2, 3, 4, 5...)

### 2. ุชูุงูู ุฃููุงุน ุงููุฑุงุญู (Stage Type Integration)
**ุงููุดููุฉ**: ุฎุตุงุฆุต `is_initial` ู `is_final` ูู ุชูู ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ
**ุงูุญู**: 
```javascript
// ุชุญุฏูุฏ ููุน ุงููุฑุญูุฉ ุจูุงุกู ุนูู ุงูุชุฑุชูุจ ูุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
const isInitial = stage.is_initial || (index === 0 && sortedStages.length > 1);
const isFinal = stage.is_final || (index === sortedStages.length - 1 && sortedStages.length > 1);
```

**ุงูููุทู**:
- **ุงููุฑุญูุฉ ุงูุฃููู**: `is_initial = true`, `is_final = false`
- **ุงููุฑุงุญู ุงููุณุทู**: `is_initial = false`, `is_final = false`  
- **ุงููุฑุญูุฉ ุงูุฃุฎูุฑุฉ**: `is_initial = false`, `is_final = true`

### 3. ุชุทุจูู ุงูุชุญุณููุงุช ุนูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุงูุญููููุฉ
- โ **ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ** (`demo=true`): ุชุทุจูู ููุณ ุงูููุทู
- โ **ุงูุจูุงูุงุช ุงูุญููููุฉ** (`demo=false`): ุชุทุจูู ููุณ ุงูููุทู

## ๐ฏ ุงููุชุงุฆุฌ

### โ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
**ุนูููุฉ ุงููุดุชุฑูุงุช**:
- ุงููุฑุญูุฉ 1: ุทูุจ ุฌุฏูุฏ (`is_initial: true`, `is_final: false`)
- ุงููุฑุญูุฉ 2: ูุฑุงุฌุนุฉ (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 3: ููุงููุฉ (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 4: ุชูููุฐ (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 5: ููุชูู (`is_initial: false`, `is_final: true`)

**ุนูููุฉ ุงูุชูุธูู**:
- ุงููุฑุญูุฉ 1: ุทูุจ ุชูุธูู (`is_initial: true`, `is_final: false`)
- ุงููุฑุญูุฉ 2: ูุฑุฒ ุงููุชูุฏููู (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 3: ููุงุจูุงุช (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 4: ุงุชุฎุงุฐ ูุฑุงุฑ (`is_initial: false`, `is_final: false`)
- ุงููุฑุญูุฉ 5: ุชู ุงูุชูุธูู (`is_initial: false`, `is_final: true`)

### โ ุงูุจูุงูุงุช ุงูุญููููุฉ
- **ุงูุชุฑุชูุจ**: โ ุตุญูุญ ุญุณุจ `order_index`
- **ุฃููุงุน ุงููุฑุงุญู**: โ ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ
- **ุงูุชูุงูู**: โ ูุนูู ูุน ุฌููุน ุงูุนูููุงุช ุงูููุฌูุฏุฉ

## ๐งช ุงูุงุฎุชุจุงุฑ
**ุงูููู**: `api/test-stage-enhancements.js`

### ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ:
- โ **ุชุฑุชูุจ ุงููุฑุงุญู**: ุตุญูุญ ูู ุฌููุน ุงูุนูููุงุช
- โ **ุงููุฑุงุญู ุงูุฃููู**: ูุฑุญูุฉ ูุงุญุฏุฉ ููุท ููู ุนูููุฉ
- โ **ุงููุฑุงุญู ุงูููุงุฆูุฉ**: ูุฑุญูุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ููู ุนูููุฉ
- โ **ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ**: ุชุนูู ุจุดูู ูุซุงูู
- โ **ุงูุจูุงูุงุช ุงูุญููููุฉ**: ุชุนูู ุจุดูู ูุซุงูู

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ

### โ ูุจู ุงูุชุญุณูู:
```json
"stages": [
  {
    "id": "1-3",
    "name": "ููุงููุฉ",
    "order_index": 3,
    "is_initial": false,
    "is_final": false
  },
  {
    "id": "1-1", 
    "name": "ุทูุจ ุฌุฏูุฏ",
    "order_index": 1,
    "is_initial": true,
    "is_final": false
  }
]
```
**ุงููุดุงูู**: ุชุฑุชูุจ ุฎุงุทุฆุ ุฃููุงุน ูุฑุงุญู ุบูุฑ ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ

### โ ุจุนุฏ ุงูุชุญุณูู:
```json
"stages": [
  {
    "id": "1-1",
    "name": "ุทูุจ ุฌุฏูุฏ", 
    "order_index": 1,
    "is_initial": true,
    "is_final": false
  },
  {
    "id": "1-2",
    "name": "ูุฑุงุฌุนุฉ",
    "order_index": 2, 
    "is_initial": false,
    "is_final": false
  },
  {
    "id": "1-5",
    "name": "ููุชูู",
    "order_index": 5,
    "is_initial": false,
    "is_final": true
  }
]
```
**ุงููููุฒุงุช**: ุชุฑุชูุจ ุตุญูุญุ ุฃููุงุน ูุฑุงุญู ูุญุฏุฏุฉ ุจุฏูุฉ

## ๐ ุงูุงุณุชุฎุฏุงู

### ููุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุน ุงูุชุญุณููุงุช:
```bash
GET /api/processes/frontend?demo=true
Authorization: Bearer YOUR_TOKEN
```

### ููุจูุงูุงุช ุงูุญููููุฉ ูุน ุงูุชุญุณููุงุช:
```bash
GET /api/processes/frontend
Authorization: Bearer YOUR_TOKEN
```

## ๐ ุงูุชูุงุตูู ุงูุชูููุฉ

### ุงููููุงุช ุงููุญุฏุซุฉ:
- `api/controllers/ProcessController.js`: ุชุญุณูู ุฏุงูุฉ `getProcessesForFrontend`

### ุงูููุทู ุงููุทุจู:
1. **ุชุฑุชูุจ ุงููุฑุงุญู**: `sort((a, b) => (a.order_index || 0) - (b.order_index || 0))`
2. **ุชุญุฏูุฏ ุงูููุน**: ููุทู ุดุฑุทู ุจูุงุกู ุนูู ุงููููุน ูู ุงููุตูููุฉ ุงููุฑุชุจุฉ
3. **ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช**: ุฌููุน ุงูุฎุตุงุฆุต ุงูุฃุฎุฑู ูุญููุธุฉ

### ุงูููุงุฆุฏ:
- **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู**: ุงููุฑุงุญู ูุฑุชุจุฉ ุจุดูู ููุทูู
- **ููุทู ูุงุถุญ**: ุฃููุงุน ุงููุฑุงุญู ูุญุฏุฏุฉ ุจูุถูุญ
- **ุชูุงูู ูุงูู**: ูุนูู ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูุงูุฌุฏูุฏุฉ
- **ุฃุฏุงุก ูุญุณู**: ุชุฑุชูุจ ูุงุญุฏ ููุท ููู ุนูููุฉ

## ๐ ุงูุฎูุงุตุฉ
ุชู ุจูุฌุงุญ ุชุญุณูู ุงูู endpoint `/api/processes/frontend` ุจููุฒุชูู ุฃุณุงุณูุชูู:
1. **ุชุฑุชูุจ ุงููุฑุงุญู** ุญุณุจ `order_index` 
2. **ุชูุงูู ุฃููุงุน ุงููุฑุงุญู** ูุน ุชุญุฏูุฏ ุตุญูุญ ูู `is_initial` ู `is_final`

ุงููุชูุฌุฉ: endpoint ูุญุณู ูููุฑ ุจูุงูุงุช ูุฑุชุจุฉ ูููุธูุฉ ูููุฑููุช ุฅูุฏ ูุน ุชุญุฏูุฏ ุฏููู ูุฃููุงุน ุงููุฑุงุญู.

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ**: 2025-09-21  
**ุงูุญุงูุฉ**: โ ููุชูู ููุฎุชุจุฑ ุจูุฌุงุญ
