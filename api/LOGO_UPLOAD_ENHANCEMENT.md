# ุชุญุณูู ูุธุงู ุฑูุน ุดุนุงุฑ ุงูุดุฑูุฉ - POST /api/settings/logo

## ููุฎุต ุงูุชุญุณููุงุช ุงููุทุจูุฉ โ

ุชู ุชุญุณูู endpoint `POST /api/settings/logo` ูุญูุธ ุงูุฑุงุจุท ุงููุงูู ููุตูุฑุฉ ุจุงุณุชุซูุงุก ุงูุฌุฒุก `http://localhost:3003` ููุง ุทููุจ.

---

## ุงููุดููุฉ ุงูุฃุตููุฉ ๐

ูุงู ุงููุธุงู ูุญูุธ ุงููุณุงุฑ ุงููุณุจู ููุท ููุตูุฑุฉ ูุซู:
```
/uploads/logos/logo-123456789.png
```

**ุงููุทููุจ**: ุญูุธ ุงูุฑุงุจุท ุงููุงูู ุจุงุณุชุซูุงุก `http://localhost:3003` ููุท.

---

## ุงูุชุญุณููุงุช ุงููุทุจูุฉ ๐

### 1. **ุชุญุฏูุซ SettingsController.js**

#### ุฃ) ุฏุงูุฉ ุฑูุน ุงูุดุนุงุฑ `uploadCompanyLogo`
```javascript
// ุจูุงุก ุงูุฑุงุจุท ุงููุงูู ููุดุนุงุฑ
const baseUrl = req.protocol + '://' + req.get('host');
const fullLogoUrl = `${baseUrl}/uploads/logos/${req.file.filename}`;

// ุญูุธ ุงูุฑุงุจุท ุงููุงูู (ุจุฏูู http://localhost:3003 ููุท)
const logoUrlToSave = fullLogoUrl.replace('http://localhost:3003', '');
const updatedSettings = await Settings.updateSystemLogo(logoUrlToSave);

res.status(200).json({
  success: true,
  message: 'ุชู ุฑูุน ุดุนุงุฑ ุงูุดุฑูุฉ ุจูุฌุงุญ',
  data: {
    logo_url: logoUrlToSave,
    full_url: fullLogoUrl, // ุงูุฑุงุจุท ุงููุงูู ูููุฑุฌุน
    settings: updatedSettings.toJSON()
  }
});
```

#### ุจ) ุชุญุณูู ุฏุงูุฉ ุญุฐู ุงูุดุนุงุฑ ุงููุฏูู
```javascript
// ุฅุฒุงูุฉ ุฃู ุจุฑูุชูููู ุฃู ุฏูููู ูู ุงูุฑุงุจุท ููุญุตูู ุนูู ุงููุณุงุฑ ุงููุณุจู
let relativePath = currentSettings.system_logo_url;
if (relativePath.startsWith('http')) {
  const url = new URL(relativePath);
  relativePath = url.pathname;
}

const oldLogoPath = path.join(__dirname, '..', relativePath);
```

#### ุฌ) ุชุญุฏูุซ ุฏุงูุฉ ุญุฐู ุงูุดุนุงุฑ `removeCompanyLogo`
```javascript
// ุฅุฒุงูุฉ ุฃู ุจุฑูุชูููู ุฃู ุฏูููู ูู ุงูุฑุงุจุท ููุญุตูู ุนูู ุงููุณุงุฑ ุงููุณุจู
let relativePath = currentSettings.system_logo_url;
if (relativePath.startsWith('http')) {
  const url = new URL(relativePath);
  relativePath = url.pathname;
}

const logoPath = path.join(__dirname, '..', relativePath);
```

### 2. **ุชุญุฏูุซ server.js**

#### ุฅุถุงูุฉ ุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ
```javascript
const path = require('path');

// ุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ (ุงูุตูุฑ ูุงููุฑููุงุช)
app.use('/uploads', express.static(path.join(__dirname, 'uploads')));
```

---

## ููู ูุนูู ุงููุธุงู ุงูุขู ๐ง

### 1. **ุนูุฏ ุฑูุน ุดุนุงุฑ ุฌุฏูุฏ**:
```javascript
// ุงูุฑุงุจุท ุงููุงูู ุงููููุดุฃ
fullLogoUrl = "http://localhost:3003/uploads/logos/logo-123456789.png"

// ุงูุฑุงุจุท ุงููุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุจุฏูู localhost:3003)
logoUrlToSave = "/uploads/logos/logo-123456789.png"
```

### 2. **ุนูุฏ ุญุฐู ุงูุดุนุงุฑ**:
- ูุชู ุชุญููู ุงูุฑุงุจุท ุงููุญููุธ ุฅูู ูุณุงุฑ ูุณุจู ูููุตูู ููููู
- ูุนูู ูุน ุงูุฑูุงุจุท ุงููุงููุฉ ูุงููุณุจูุฉ

### 3. **ุงููุตูู ููุตูุฑุฉ**:
- ูููู ุงููุตูู ููุตูุฑุฉ ุนุจุฑ: `http://localhost:3003/uploads/logos/logo-123456789.png`
- ุงูุฎุงุฏู ูุฎุฏู ุงููููุงุช ูู ูุฌูุฏ `uploads` ุชููุงุฆูุงู

---

## ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู ๐ก

### **ุฑูุน ุดุนุงุฑ ุฌุฏูุฏ**
```bash
POST /api/settings/logo
Content-Type: multipart/form-data
Authorization: Bearer <token>

# Form Data:
company_logo: [image file]
```

### **ุงูุงุณุชุฌุงุจุฉ**
```json
{
  "success": true,
  "message": "ุชู ุฑูุน ุดุนุงุฑ ุงูุดุฑูุฉ ุจูุฌุงุญ",
  "data": {
    "logo_url": "/uploads/logos/logo-1760983637639-617782968.png",
    "full_url": "http://localhost:3003/uploads/logos/logo-1760983637639-617782968.png",
    "settings": {
      "system_logo_url": "/uploads/logos/logo-1760983637639-617782968.png",
      // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
    }
  }
}
```

### **ุญุฐู ุงูุดุนุงุฑ**
```bash
DELETE /api/settings/logo
Authorization: Bearer <token>
```

### **ุงูุงุณุชุฌุงุจุฉ**
```json
{
  "success": true,
  "message": "ุชู ุญุฐู ุดุนุงุฑ ุงูุดุฑูุฉ ุจูุฌุงุญ",
  "data": {
    "system_logo_url": null,
    // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
  }
}
```

---

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ โจ

### 1. **ุฑุงุจุท ุฐูู**
- ูุญูุธ ุงูุฑุงุจุท ุงููุงูู ุจุงุณุชุซูุงุก `http://localhost:3003`
- ูุนูู ูุน ุฃู ุฏูููู ุฃู ุจูุฑุช
- ูุฑู ูููุดุฑ ูู ุจูุฆุงุช ูุฎุชููุฉ

### 2. **ูุนุงูุฌุฉ ูุญุณูุฉ ูููููุงุช**
- ูุชุนุงูู ูุน ุงูุฑูุงุจุท ุงููุงููุฉ ูุงููุณุจูุฉ
- ุญุฐู ุขูู ูููููุงุช ุงููุฏููุฉ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ

### 3. **ุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ**
- ุฅููุงููุฉ ุงููุตูู ุงููุจุงุดุฑ ููุตูุฑ
- ุฎุฏูุฉ ุณุฑูุนุฉ ูุขููุฉ
- ุฏุนู ุฌููุน ุฃููุงุน ุงููููุงุช ูู ูุฌูุฏ uploads

### 4. **ุงุณุชุฌุงุจุฉ ุดุงููุฉ**
- ุงูุฑุงุจุท ุงููุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุฑุงุจุท ุงููุงูู ูููุฑุฌุน
- ูุนูููุงุช ุงูุฅุนุฏุงุฏุงุช ุงููุญุฏุซุฉ

---

## ุงููููุงุช ุงููุนุฏูุฉ ๐

### 1. **controllers/SettingsController.js**
- ุชุญุฏูุซ `uploadCompanyLogo()` - ุจูุงุก ูุญูุธ ุงูุฑุงุจุท ุงูุฐูู
- ุชุญุฏูุซ `removeCompanyLogo()` - ูุนุงูุฌุฉ ูุญุณูุฉ ููุฑูุงุจุท
- ุชุญุณูู ูุนุงูุฌุฉ ุญุฐู ุงููููุงุช ุงููุฏููุฉ

### 2. **server.js**
- ุฅุถุงูุฉ `express.static` ูุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ
- ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `path` module

### 3. **test-logo-upload.js** (ุฌุฏูุฏ)
- ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ูุธุงุฆู ุฑูุน ุงูุดุนุงุฑ
- ุงุฎุชุจุงุฑ ุงูุฑุงุจุท ุงููุญููุธ
- ุงุฎุชุจุงุฑ ุงููุตูู ููุตูุฑุฉ
- ุงุฎุชุจุงุฑ ุญุฐู ุงูุดุนุงุฑ

---

## ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ โ

ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจูุฌุงุญ ูุน ุงูุณููุงุฑูููุงุช ุงูุชุงููุฉ:

### โ **ุงุฎุชุจุงุฑ ุฑูุน ุงูุดุนุงุฑ**
- ุฑูุน ุตูุฑุฉ PNG ุจูุฌุงุญ
- ุญูุธ ุงูุฑุงุจุท ุงูุตุญูุญ: `/uploads/logos/logo-1760983637639-617782968.png`
- **ูุง ูุญุชูู ุนูู `localhost:3003`** โ

### โ **ุงุฎุชุจุงุฑ ุงููุตูู ููุตูุฑุฉ**
- ุงููุตูู ููุตูุฑุฉ ุนุจุฑ ุงูุฑุงุจุท ุงููุงูู
- ุญุฌู ุงูุตูุฑุฉ: 72 bytes
- ุงุณุชุฌุงุจุฉ HTTP 200

### โ **ุงุฎุชุจุงุฑ ุญุฐู ุงูุดุนุงุฑ**
- ุญุฐู ุงูููู ูู ุงููุธุงู ุจูุฌุงุญ
- ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช: `system_logo_url: null`
- ุชูุธูู ูุงูู

### โ **ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
- ุงูุชุญูู ูู ููุน ุงูููู
- ุงูุชุญูู ูู ุญุฌู ุงูููู
- ูุนุงูุฌุฉ ุงููููุงุช ุงูููููุฏุฉ

---

## ููุงุฑูุฉ ูุจู ูุจุนุฏ ๐

### **ูุจู ุงูุชุญุณูู** โ
```json
{
  "system_logo_url": "/uploads/logos/logo-123.png"
}
```

### **ุจุนุฏ ุงูุชุญุณูู** โ
```json
{
  "logo_url": "/uploads/logos/logo-1760983637639-617782968.png",
  "full_url": "http://localhost:3003/uploads/logos/logo-1760983637639-617782968.png"
}
```

**ุงููุฑู**:
- โ ุฑุงุจุท ูุงูู ุจุงุณุชุซูุงุก `localhost:3003`
- โ ูุฑููุฉ ูู ุงููุดุฑ
- โ ูุนูููุงุช ุฅุถุงููุฉ ูููุฏุฉ
- โ ูุนุงูุฌุฉ ูุญุณูุฉ ูููููุงุช

---

## ุงูุชูุงูู ูุน ุงูุจูุฆุงุช ุงููุฎุชููุฉ ๐

ุงููุธุงู ุงูุขู ูุนูู ูุน:

### **ุงูุชุทููุฑ ุงููุญูู**
```
http://localhost:3003/uploads/logos/logo-123.png
โ ููุญูุธ ูู
/uploads/logos/logo-123.png
```

### **ุงูุฅูุชุงุฌ**
```
https://api.company.com/uploads/logos/logo-123.png
โ ููุญูุธ ูู
/uploads/logos/logo-123.png
```

### **ุจูุฆุฉ ุงุฎุชุจุงุฑ**
```
http://test-server:8080/uploads/logos/logo-123.png
โ ููุญูุธ ูู
/uploads/logos/logo-123.png
```

---

## ุงูุฎูุงุตุฉ ๐ฏ

ุชู ุชุญุณูู ูุธุงู ุฑูุน ุดุนุงุฑ ุงูุดุฑูุฉ ุจูุฌุงุญ ูุน:

1. **โ ุญูุธ ุงูุฑุงุจุท ุงูุฐูู** - ูุงูู ุจุงุณุชุซูุงุก `localhost:3003`
2. **โ ุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ** - ูุตูู ูุจุงุดุฑ ููุตูุฑ
3. **โ ูุนุงูุฌุฉ ูุญุณูุฉ** - ููุฑูุงุจุท ุงููุงููุฉ ูุงููุณุจูุฉ
4. **โ ุงุฎุชุจุงุฑ ุดุงูู** - ุฌููุน ุงูุณููุงุฑูููุงุช ุชุนูู
5. **โ ุชูุงูู ูุน ุงูุจูุฆุงุช** - ูุฑู ูููุดุฑ ูู ุฃู ููุงู

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ! ๐
