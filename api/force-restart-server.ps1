# Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø§Ù„Ù‚ÙˆØ©

Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Red
Write-Host "âš ï¸  Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø§Ù„Ù‚ÙˆØ©" -ForegroundColor Red
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Red
Write-Host ""

# Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Node.js Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 3004
Write-Host "1ï¸âƒ£ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…..." -ForegroundColor Yellow

try {
    $connections = Get-NetTCPConnection -LocalPort 3004 -ErrorAction SilentlyContinue
    if ($connections) {
        $processes = $connections | Select-Object -ExpandProperty OwningProcess -Unique
        foreach ($proc in $processes) {
            Write-Host "   â¹ï¸  Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ© $proc..." -ForegroundColor Gray
            Stop-Process -Id $proc -Force -ErrorAction SilentlyContinue
            Write-Host "   âœ… ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ© $proc" -ForegroundColor Green
        }
        Start-Sleep -Seconds 2
    } else {
        Write-Host "   â„¹ï¸  Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 3004" -ForegroundColor Gray
    }
} catch {
    Write-Host "   âš ï¸  Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹" -ForegroundColor Yellow
    Write-Host "   ğŸ’¡ ÙŠØ±Ø¬Ù‰ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¨Ù€ Ctrl+C" -ForegroundColor Yellow
}

Write-Host ""

# Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
Write-Host "2ï¸âƒ£ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..." -ForegroundColor Yellow
Set-Location "e:\laravel\xampp old\htdocs\laravel\pipefy-main\project\api"
Write-Host "   âœ… ØªÙ…" -ForegroundColor Green

Write-Host ""

# Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¨Ø¯Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ±
Write-Host "3ï¸âƒ£ Ø¨Ø¯Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ±..." -ForegroundColor Yellow
Write-Host ""
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host "ğŸš€ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†..." -ForegroundColor Cyan
Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan
Write-Host ""
Write-Host "â³ Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ØªØ±Ù‰: 'Database connected successfully!'" -ForegroundColor Yellow
Write-Host ""

# Ø¨Ø¯Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ±
npm run dev
