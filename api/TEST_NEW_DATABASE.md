# ๐งช ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ - 34 ุตูุงุญูุฉ

## ๐ฏ ุงููุฏู
ุงูุชุญูู ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุชุญุชูู ุนูู 34 ุตูุงุญูุฉ ุชููุงุฆูุงู ุจุนุฏ ุชุดุบูู ุงูู migrations.

---

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ

```bash
# ูู PostgreSQL
CREATE DATABASE pipefy_test;
```

ุฃู ุนุจุฑ ุงูุณูุฑูุจุช:
```bash
npm run create-db
```

---

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ููู .env

```env
DB_DATABASE=pipefy_test
```

---

### ุงูุฎุทูุฉ 3: ุชุดุบูู ุงูู Migrations

```bash
npm run migrate
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ ุชูููุฐ 001_create_users_system.sql...
โ ุชู ุชูููุฐ 001_create_users_system.sql ุจูุฌุงุญ
๐ ุชูููุฐ 002_seed_basic_data.sql...
โ ุชู ุชูููุฐ 002_seed_basic_data.sql ุจูุฌุงุญ
...
โ ุชู ุชูููุฐ ุฌููุน ุงูู migrations ุจูุฌุงุญ!
```

---

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

```bash
node scripts/verify-permissions.js
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
Total Permissions: 34 โ
Admin Role Permissions: 34 โ

Permissions by Resource:
  automation: 1
  fields: 4
  integrations: 1
  permissions: 1
  processes: 6
  reports: 1
  roles: 2
  stages: 4
  system: 1
  tickets: 8
  users: 5
```

---

### ุงูุฎุทูุฉ 5: ุฅูุดุงุก ูุณุชุฎุฏู Admin

```bash
node scripts/create-admin.js
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุชู ุฅูุดุงุก Super Admin ุจูุฌุงุญ!

๐ ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู:
๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: admin@pipefy.com
๐ ูููุฉ ุงููุฑูุฑ: admin123
๐ ุนุฏุฏ ุงูุตูุงุญูุงุช: 34
```

---

### ุงูุฎุทูุฉ 6: ุนุฑุถ ุงูููุฎุต ุงูุดุงูู

```bash
node scripts/show-permissions-summary.js
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ ููุฎุต ูุธุงู ุงูุตูุงุญูุงุช - Pipefy

๐ ุฅุญุตุงุฆูุงุช ุนุงูุฉ:
   ๐ ุฅุฌูุงูู ุงูุตูุงุญูุงุช: 34
   ๐ญ ุฅุฌูุงูู ุงูุฃุฏูุงุฑ: 3
   ๐ฅ ุฅุฌูุงูู ุงููุณุชุฎุฏููู: 1

๐ฆ ุงูุตูุงุญูุงุช ุญุณุจ ุงูููุฑุฏ:
   tickets              โโโโ 8
   processes            โโโ 6
   users                โโ 5
   fields               โโ 4
   stages               โโ 4
   ...
```

---

## โ ูุนุงููุฑ ุงููุฌุงุญ

| ุงููุนูุงุฑ | ุงููููุฉ ุงููุชููุนุฉ | ุงูุญุงูุฉ |
|---------|-----------------|--------|
| **ุฅุฌูุงูู ุงูุตูุงุญูุงุช** | 34 | โฌ |
| **ุตูุงุญูุงุช Admin** | 34 | โฌ |
| **ุตูุงุญูุงุช Fields** | 4 | โฌ |
| **ุตูุงุญูุงุช Processes** | 6 | โฌ |
| **ุตูุงุญูุงุช Stages** | 4 | โฌ |
| **ุตูุงุญูุงุช Tickets** | 8 | โฌ |
| **ุตูุงุญูุงุช Users** | 5 | โฌ |
| **ุตูุงุญูุงุช ุฃุฎุฑู** | 7 | โฌ |

---

## ๐ ุงุณุชุนูุงูุงุช SQL ููุชุญูู ุงููุฏูู

### 1. ุนุฏุฏ ุงูุตูุงุญูุงุช ุงูููู
```sql
SELECT COUNT(*) as total_permissions FROM permissions;
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: 34
```

### 2. ุงูุตูุงุญูุงุช ุญุณุจ ุงูููุฑุฏ
```sql
SELECT resource, COUNT(*) as count
FROM permissions
GROUP BY resource
ORDER BY resource;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
automation     | 1
fields         | 4
integrations   | 1
permissions    | 1
processes      | 6
reports        | 1
roles          | 2
stages         | 4
system         | 1
tickets        | 8
users          | 5
```

### 3. ุตูุงุญูุงุช ุฏูุฑ Admin
```sql
SELECT COUNT(*) as admin_permissions
FROM role_permissions rp
JOIN roles r ON r.id = rp.role_id
WHERE r.name = 'admin';
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: 34
```

### 4. ูุงุฆูุฉ ุฌููุน ุงูุตูุงุญูุงุช
```sql
SELECT resource, action, name
FROM permissions
ORDER BY resource, action;
```

---

## ๐งช ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1: ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุชูุงูุงู โ
```bash
# 1. ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช
CREATE DATABASE pipefy_fresh;

# 2. ุชุญุฏูุซ .env
DB_DATABASE=pipefy_fresh

# 3. ุชุดุบูู migrations
npm run migrate

# 4. ุงูุชุญูู
node scripts/verify-permissions.js

# ุงููุชูุฌุฉ: 34 ุตูุงุญูุฉ โ
```

### ุงูุณููุงุฑูู 2: ูุงุนุฏุฉ ุจูุงูุงุช ููุฌูุฏุฉ ุจู 16 ุตูุงุญูุฉ โ๏ธ
```bash
# 1. ุฅุถุงูุฉ ุงูุตูุงุญูุงุช ุงูููููุฏุฉ
node scripts/add-all-permissions.js

# 2. ุงูุชุญูู
node scripts/verify-permissions.js

# ุงููุชูุฌุฉ: 34 ุตูุงุญูุฉ โ
```

### ุงูุณููุงุฑูู 3: ุฅุนุงุฏุฉ ุชุดุบูู Migrations ๐
```bash
# 1. ุญุฐู ุงูุจูุงูุงุช
DELETE FROM role_permissions;
DELETE FROM permissions;
DELETE FROM users;
DELETE FROM roles;

# 2. ุฅุนุงุฏุฉ ุชุดุบูู
npm run migrate

# 3. ุงูุชุญูู
node scripts/verify-permissions.js

# ุงููุชูุฌุฉ: 34 ุตูุงุญูุฉ โ
```

---

## ๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### ุชุงุฑูุฎ ุงูุงุฎุชุจุงุฑ: _____________

| ุงูุณููุงุฑูู | ุงููุชูุฌุฉ | ุงูููุงุญุธุงุช |
|-----------|---------|-----------|
| ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ | โฌ ูุฌุญ / โฌ ูุดู | |
| ูุงุนุฏุฉ ุจูุงูุงุช ููุฌูุฏุฉ | โฌ ูุฌุญ / โฌ ูุดู | |
| ุฅุนุงุฏุฉ ุชุดุบูู Migrations | โฌ ูุฌุญ / โฌ ูุดู | |

### ุนุฏุฏ ุงูุตูุงุญูุงุช
- ุฅุฌูุงูู ุงูุตูุงุญูุงุช: _______
- ุตูุงุญูุงุช Admin: _______
- ุตูุงุญูุงุช Member: _______
- ุตูุงุญูุงุช Guest: _______

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุนุฏุฏ ุงูุตูุงุญูุงุช ุฃูู ูู 34

**ุงูุญู:**
```bash
# 1. ุชุญูู ูู ููู Migration
cat migrations/002_seed_basic_data.sql | grep "INSERT INTO permissions"

# 2. ุฃุนุฏ ุชุดุบูู Migration
npm run migrate

# 3. ุฃู ุงุณุชุฎุฏู ุงูุณูุฑูุจุช
node scripts/add-all-permissions.js
```

### ุงููุดููุฉ: Admin ูุง ูููู ุฌููุน ุงูุตูุงุญูุงุช

**ุงูุญู:**
```bash
# 1. ุฃุนุฏ ุฑุจุท ุงูุตูุงุญูุงุช
node scripts/add-all-permissions.js

# 2. ุฃู ุนุจุฑ SQL
DELETE FROM role_permissions WHERE role_id IN (SELECT id FROM roles WHERE name = 'admin');
INSERT INTO role_permissions (role_id, permission_id)
SELECT r.id, p.id FROM roles r, permissions p WHERE r.name = 'admin';
```

### ุงููุดููุฉ: ุฎุทุฃ ูู Migration

**ุงูุญู:**
```bash
# 1. ุชุญูู ูู ุงูุณุฌู
SELECT * FROM migrations ORDER BY executed_at DESC;

# 2. ุญุฐู ุงูุณุฌู ุงููุนุทูุจ
DELETE FROM migrations WHERE filename = '002_seed_basic_data.sql';

# 3. ุฅุนุงุฏุฉ ุงูุชุดุบูู
npm run migrate
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู 34 ุตูุงุญูุฉ
- [ ] ุฏูุฑ Admin ูููู 34 ุตูุงุญูุฉ
- [ ] ุฏูุฑ Member ูููู ุตูุงุญูุงุช ูุญุฏูุฏุฉ
- [ ] ุฏูุฑ Guest ูููู ุตูุงุญูุงุช ุนุฑุถ ููุท
- [ ] ุฌููุน ุงูุตูุงุญูุงุช ูุฑุชุจุทุฉ ุจุดูู ุตุญูุญ
- [ ] ูุง ุชูุฌุฏ ุตูุงุญูุงุช ููุฑุฑุฉ
- [ ] Migration ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] create-admin.js ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] verify-permissions.js ูุนุฑุถ ุงููุชุงุฆุฌ ุงูุตุญูุญุฉ

---

## ๐ ุงูุฎูุงุตุฉ

ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช:
- โ ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูุตูุงุญูุงุช ุงูู 34 ูุฌูุฒุฉ ูุณุจูุงู
- โ ูุง ุญุงุฌุฉ ูุณูุฑูุจุชุงุช ุฅุถุงููุฉ
- โ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2025-10-11  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุฎุชุจุงุฑ  
**ุงูุฅุตุฏุงุฑ**: 1.0
