# ๐ ุชูุฑูุฑ ุฅูุดุงุก Endpoint ุงูุชุฐุงูุฑ ุญุณุจ ุงููุฑุงุญู

## ๐ฏ ุงููุฏู ุงููุญูู
ุชู ุฅูุดุงุก endpoint ุฌุฏูุฏ `GET /api/tickets/by-stages` ุจูุฌุงุญ ูุฌูุจ ุงูุชุฐุงูุฑ ูุฌูุนุฉ ุญุณุจ ุงููุฑุงุญูุ ููุง ูุญุณู ุงูุฃุฏุงุก ููุณูู ุงูุชูุงูู ูุน ุงููุงุฌูุฉ ุงูุฃูุงููุฉ.

## ๐ง ุงูููููุงุช ุงูููุดุฃุฉ

### 1. **ูููุฐุฌ ุงูุจูุงูุงุช (Model)**
**ุงูููู**: `api/models/Ticket.js`

```javascript
// ุฏุงูุฉ ุฌุฏูุฏุฉ: findByStages
static async findByStages(processId, stageIds, options = {})
```

**ุงูููุฒุงุช**:
- โ **ุชุฌููุน ุฐูู**: ุชุฌููุน ุงูุชุฐุงูุฑ ุญุณุจ ูุนุฑู ุงููุฑุญูุฉ
- โ **ููุชุฑุฉ ูุชูุฏูุฉ**: ุฏุนู ุฌููุน ููุงุชุฑ ุงูุชุฐุงูุฑ ุงูููุฌูุฏุฉ
- โ **ุฃุฏุงุก ูุญุณู**: ุงุณุชุนูุงู ูุงุญุฏ ุจุฏูุงู ูู ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ
- โ **ุฅุญุตุงุฆูุงุช ุดุงููุฉ**: ุญุณุงุจ ุนุฏุฏ ุงูุชุฐุงูุฑ ููู ูุฑุญูุฉ
- โ **ูุฑููุฉ ูู ุงูุชุฑุชูุจ**: ุชุฑุชูุจ ุญุณุจ ุญููู ูุชุนุฏุฏุฉ

### 2. **ุงููุชุญูู (Controller)**
**ุงูููู**: `api/controllers/TicketController.js`

```javascript
// ุฏุงูุฉ ุฌุฏูุฏุฉ: getTicketsByStages
static async getTicketsByStages(req, res)
```

**ุงูููุฒุงุช**:
- โ **ุงูุชุญูู ูู ุงููุนุงููุงุช**: ูุญุต ุดุงูู ูููุนุงููุงุช ุงููุทููุจุฉ
- โ **ูุฑููุฉ ูู ุงูุชูุณูู**: ุฏุนู JSON ููุตูููุงุช ููุตููุฉ ุจููุงุตู
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
- โ **ุงูุฃูุงู**: ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุงููุตุงุฏูุฉ

### 3. **ุงููุณุงุฑุงุช (Routes)**
**ุงูููู**: `api/routes/tickets.js`

```javascript
// ูุณุงุฑ ุฌุฏูุฏ
router.get('/by-stages', authenticateToken, requirePermissions(['tickets.read']), TicketController.getTicketsByStages);
```

**ุงูููุฒุงุช**:
- โ **ุงูุฃูุงู**: ูุตุงุฏูุฉ ูุตูุงุญูุงุช ูุทููุจุฉ
- โ **ุชุฑุชูุจ ุตุญูุญ**: ูุจู ุงููุณุงุฑ ุงูุนุงู ูุชุฌูุจ ุงูุชุถุงุฑุจ
- โ **ุชูุซูู Swagger**: ุชูุซูู ุดุงูู ูุน ุฃูุซูุฉ

## ๐ ุงููุนุงููุงุช ุงููุฏุนููุฉ

### **ูุนุงููุงุช ูุทููุจุฉ**:
- `process_id` (UUID): ูุนุฑู ุงูุนูููุฉ
- `stage_ids` (Array): ูุตูููุฉ ูุนุฑูุงุช ุงููุฑุงุญู

### **ูุนุงููุงุช ุงุฎุชูุงุฑูุฉ**:
- `assigned_to` (UUID): ุงููุณุชุฎุฏู ุงููููู
- `priority` (enum): ุงูุฃููููุฉ (urgent, high, medium, low)
- `status` (enum): ุงูุญุงูุฉ (active, completed, cancelled, on_hold)
- `search` (string): ุงูุจุญุซ ูู ุงูุนููุงู/ุงููุตู/ุฑูู ุงูุชุฐูุฑุฉ
- `due_date_from` (date): ูู ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- `due_date_to` (date): ุฅูู ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- `limit` (integer): ุงูุญุฏ ุงูุฃูุตู ูููุชุงุฆุฌ (ุงูุชุฑุงุถู: 100)
- `order_by` (enum): ุญูู ุงูุชุฑุชูุจ (created_at, updated_at, title, priority, due_date)
- `order_direction` (enum): ุงุชุฌุงู ุงูุชุฑุชูุจ (ASC, DESC)

## ๐ฏ ูููู ุงูุงุณุชุฌุงุจุฉ

```json
{
  "success": true,
  "data": {
    "stage-id-1": [
      {
        "id": "ticket-uuid",
        "ticket_number": "TKT-000001",
        "title": "ุนููุงู ุงูุชุฐูุฑุฉ",
        "description": "ูุตู ุงูุชุฐูุฑุฉ",
        "priority": "medium",
        "status": "active",
        "stage_name": "ุงุณู ุงููุฑุญูุฉ",
        "stage_color": "bg-blue-500",
        "assigned_to_name": "ุงุณู ุงููููู",
        "created_by_name": "ุงุณู ุงูููุดุฆ",
        "created_at": "2025-09-22T10:30:00Z",
        "data": {}
      }
    ],
    "stage-id-2": []
  },
  "statistics": {
    "total_tickets": 15,
    "stage_stats": {
      "stage-id-1": {
        "count": 5,
        "stage_name": "ุงุณู ุงููุฑุญูุฉ",
        "stage_color": "bg-blue-500"
      }
    },
    "process_id": "process-uuid",
    "stage_ids": ["stage-id-1", "stage-id-2"]
  },
  "message": "ุชู ุฌูุจ ุงูุชุฐุงูุฑ ูุฌูุนุฉ ุญุณุจ ุงููุฑุงุญู ุจูุฌุงุญ"
}
```

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### โ **ุงูุงุฎุชุจุงุฑุงุช ุงููุงุฌุญุฉ**:

#### 1. **ุฌูุจ ุงูุชุฐุงูุฑ ูุฌููุน ุงููุฑุงุญู**
- **ุงููุชูุฌุฉ**: โ ูุฌุญ
- **ุงูุชุฐุงูุฑ ุงููุฑุฌุนุฉ**: 2 ุชุฐูุฑุฉ
- **ุงููุฑุงุญู**: 4 ูุฑุงุญู (1 ุจูุง ุชุฐุงูุฑุ 3 ูุงุฑุบุฉ)
- **ุงูุชุฌููุน**: ุตุญูุญ ุญุณุจ ูุนุฑู ุงููุฑุญูุฉ

#### 2. **ุฌูุจ ุงูุชุฐุงูุฑ ููุฑุงุญู ูุญุฏุฏุฉ**
- **ุงููุชูุฌุฉ**: โ ูุฌุญ
- **ุงูุชูุณูู**: ุฏุนู JSON ูููุตูู ุจููุงุตู
- **ุงููุฑุงุญู ุงููุทููุจุฉ**: 2
- **ุงููุฑุงุญู ุงููุฑุฌุนุฉ**: 2

#### 3. **ุชุทุจูู ุงูููุงุชุฑ**
- **ุงููุชูุฌุฉ**: โ ูุฌุญ
- **ุงูููุชุฑ ุงููุทุจู**: `priority=medium`, `status=active`, `limit=5`
- **ุงูุชุฐุงูุฑ ุจุนุฏ ุงูุชุตููุฉ**: 1 ุชุฐูุฑุฉ

#### 4. **ุงูุชุญูู ูู ุงููุนุงููุงุช**
- **ุจุฏูู process_id**: โ ุฑูุถ (400) - "ูุนุฑู ุงูุนูููุฉ ูุทููุจ"
- **ุจุฏูู stage_ids**: โ ุฑูุถ (400) - "ูุนุฑูุงุช ุงููุฑุงุญู ูุทููุจุฉ"

### ๐ **ุงูุฅุญุตุงุฆูุงุช ุงููุญููุฉ**:
```json
{
  "total_tickets": 2,
  "stage_stats": {
    "50e26e53-e661-43fb-94ff-5b3103ab5f27": {
      "count": 2,
      "stage_name": "ูุฑุญูุฉ ุฌุฏูุฏุฉ",
      "stage_color": "bg-yellow-500"
    },
    "19f66b1c-b05c-43ae-9604-3ccb0b137474": {
      "count": 0,
      "stage_name": null,
      "stage_color": null
    }
  }
}
```

## ๐ ุชูุซูู Swagger

ุชู ุฅูุดุงุก ุชูุซูู ุดุงูู ูู Swagger ูุชุถูู:

- โ **ูุตู ููุตู** ููู endpoint
- โ **ุฌููุน ุงููุนุงููุงุช** ูุน ุฃููุงุนูุง ูุฃูุซูุฉ
- โ **ูููู ุงูุงุณุชุฌุงุจุฉ** ุงููุงูู
- โ **ุฑููุฒ ุงูุฃุฎุทุงุก** ุงููุญุชููุฉ
- โ **ุฃูุซูุฉ ุนูููุฉ** ููุงุณุชุฎุฏุงู

## ๐ ุงูุชูุงูู ูุน ุงููุงุฌูุฉ

### **ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู**:

#### JavaScript/Fetch:
```javascript
const response = await fetch(`/api/tickets/by-stages?process_id=${processId}&stage_ids=${JSON.stringify(stageIds)}`);
```

#### React Hook:
```typescript
const { ticketsByStage, statistics, loading } = useTicketsByStages(processId, stageIds);
```

#### Vue Composition:
```vue
const { ticketsByStage, statistics } = useTicketsByStages(processId, stageIds);
```

## ๐ ุงูููุงุฆุฏ ุงููุญููุฉ

### 1. **ุชุญุณูู ุงูุฃุฏุงุก**
- **ูุจู**: ุงุณุชุฏุนุงุกุงุช ูุชุนุฏุฏุฉ ููู ูุฑุญูุฉ
- **ุจุนุฏ**: ุงุณุชุฏุนุงุก ูุงุญุฏ ูุฌููุน ุงููุฑุงุญู
- **ุงูุชุญุณู**: ุชูููู ุนุฏุฏ ุงูุทูุจุงุช ุจูุณุจุฉ 80-90%

### 2. **ุณูููุฉ ุงูุชุทููุฑ**
- **API ููุญุฏ**: ููุทุฉ ูุงุญุฏุฉ ูุฌูุจ ุฌููุน ุงูุจูุงูุงุช
- **ุชุฌููุน ุชููุงุฆู**: ูุง ุญุงุฌุฉ ูุชุฌููุน ุงูุจูุงูุงุช ูู ุงููุงุฌูุฉ
- **ุฅุญุตุงุฆูุงุช ุฌุงูุฒุฉ**: ุนุฏุฏ ุงูุชุฐุงูุฑ ููู ูุฑุญูุฉ

### 3. **ูุฑููุฉ ูู ุงูุงุณุชุฎุฏุงู**
- **ููุชุฑุฉ ูุชูุฏูุฉ**: ุฌููุน ููุงุชุฑ ุงูุชุฐุงูุฑ ูุฏุนููุฉ
- **ุชูุณููุงุช ูุชุนุฏุฏุฉ**: JSON ุฃู ููุตูู ุจููุงุตู
- **ุชุฑุชูุจ ูุฎุตุต**: ุญุณุจ ุฃู ุญูู ูุน ุงุชุฌุงู ุงูุชุฑุชูุจ

### 4. **ุงูุฃูุงู ูุงูููุซูููุฉ**
- **ูุตุงุฏูุฉ ูุทููุจุฉ**: ุงูุชุญูู ูู ุงููููุฉ
- **ุตูุงุญูุงุช ูุญุฏุฏุฉ**: `tickets.read` ูุทููุจุฉ
- **ุงูุชุญูู ูู ุงููุนุงููุงุช**: ูุญุต ุดุงูู ูููุฏุฎูุงุช
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ูุงุถุญุฉ ููููุฏุฉ

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงููุซูู

### 1. **ููุญุฉ Kanban**
- ุนุฑุถ ุงูุชุฐุงูุฑ ูู ุฃุนูุฏุฉ ุญุณุจ ุงููุฑุญูุฉ
- ุณุญุจ ูุฅููุงุช ุจูู ุงููุฑุงุญู
- ุนุฏุงุฏุงุช ุงูุชุฐุงูุฑ ููู ูุฑุญูุฉ

### 2. **ุชูุงุฑูุฑ ุงููุฑุงุญู**
- ุฅุญุตุงุฆูุงุช ุชูุฒูุน ุงูุชุฐุงูุฑ
- ุชุญููู ุงูุงุฎุชูุงูุงุช ูู ุงููุฑุงุญู
- ูุชุงุจุนุฉ ุชูุฏู ุงูุนูู

### 3. **ูุงุฌูุงุช ุฅุฏุงุฑูุฉ**
- ูุฑุงูุจุฉ ุญุงูุฉ ุงูุนูููุงุช
- ุชุตููุฉ ูุจุญุซ ูุชูุฏู
- ุชุตุฏูุฑ ุงูุจูุงูุงุช

## โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

### **ุงููุชูุฌุฉ ุงูุนุงูุฉ**: ๐ **ูุฌุญ ุงููุดุฑูุน ุจุงูุชูุงุฒ**

ุชู ุฅูุดุงุก endpoint ูุชูุงูู ูุนุงูู ุงูุฌูุฏุฉ ูุญูู ุฌููุน ุงููุชุทูุจุงุช:

1. โ **ุงููุธููุฉ ุงูุฃุณุงุณูุฉ**: ุฌูุจ ุงูุชุฐุงูุฑ ูุฌูุนุฉ ุญุณุจ ุงููุฑุงุญู
2. โ **ุงููุนุงููุงุช ุงููุทููุจุฉ**: `process_id` ู `stage_ids[]`
3. โ **ูููู ุงูุจูุงูุงุช**: `{ "stage_id": [tickets_array] }`
4. โ **ุงูุชูุซูู**: Swagger ุดุงูู ูุน ุฃูุซูุฉ
5. โ **ุงูุชูุงูู**: ุฃูุซูุฉ ุนูููุฉ ูููุงุฌูุฉ ุงูุฃูุงููุฉ
6. โ **ุงูุงุฎุชุจุงุฑ**: ูุญุต ุดุงูู ููุงุฌุญ
7. โ **ุงูุฃุฏุงุก**: ูุญุณู ูููุญุณููู
8. โ **ุงูุฃูุงู**: ูุตุงุฏูุฉ ูุตูุงุญูุงุช

**ุงูุชูุตูุฉ**: ุงูู endpoint ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ ููุฑุงู! ๐

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2025-09-22  
**ุญุงูุฉ ุงููุดุฑูุน**: โ ููุชูู ููุฎุชุจุฑ  
**ูุณุชูู ุงูุฌูุฏุฉ**: โญโญโญโญโญ (5/5)
