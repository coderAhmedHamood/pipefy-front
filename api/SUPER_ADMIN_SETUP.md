# ๐ ุฅุนุฏุงุฏ Super Admin ูุน ุฌููุน ุงูุตูุงุญูุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ุณูุฑูุจุช `scripts/create-admin.js` ููููู ุจุฅูุดุงุก ูุณุชุฎุฏู **Super Admin** ูุน **ุฌููุน ุงูุตูุงุญูุงุช** ุชููุงุฆูุงู.

---

## โจ ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ

### ูุจู ุงูุชุญุฏูุซ โ
- ุฅูุดุงุก ูุณุชุฎุฏู ููุท
- ุจุฏูู ุฑุจุท ุงูุตูุงุญูุงุช
- ูุญุชุงุฌ ุฅุนุฏุงุฏ ูุฏูู ููุตูุงุญูุงุช

### ุจุนุฏ ุงูุชุญุฏูุซ โ
- ุฅูุดุงุก ูุณุชุฎุฏู Super Admin
- ุฑุจุท **ุฌููุน ุงูุตูุงุญูุงุช** ุชููุงุฆูุงู
- ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุฑุงู

---

## ๐ฏ ูุง ููุนูู ุงูุณูุฑูุจุช

### ุงูุฎุทูุงุช ุงูุชููุงุฆูุฉ:

1. **ุงูุจุญุซ ุนู ุฏูุฑ Admin** โ
   - ูุจุญุซ ุนู ุฏูุฑ Admin ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุฎุชุงุฑ ุงูุฏูุฑ ุงููุธุงูู (system role) ุฅู ูุฌุฏ

2. **ุญุฐู ุงููุณุชุฎุฏู ุงููุฏูู** โ
   - ูุญุฐู ุงููุณุชุฎุฏู `admin@pipefy.com` ุฅู ูุงู ููุฌูุฏุงู
   - ูุชุฌูุจ ุงูุชูุฑุงุฑ

3. **ุชุดููุฑ ูููุฉ ุงููุฑูุฑ** โ
   - ูุดูุฑ ูููุฉ ุงููุฑูุฑ `admin123` ุจุงุณุชุฎุฏุงู bcrypt

4. **ุฅูุดุงุก ุงููุณุชุฎุฏู** โ
   - ุงูุงุณู: `ูุฏูุฑ ุงููุธุงู ุงูุฑุฆูุณู`
   - ุงูุจุฑูุฏ: `admin@pipefy.com`
   - ูููุฉ ุงููุฑูุฑ: `admin123`
   - ุงูุฏูุฑ: Admin
   - ุงูุญุงูุฉ: ูุดุท ููููุนูู

5. **ุฌูุจ ุฌููุน ุงูุตูุงุญูุงุช** โ
   - ูุฌูุจ **ูู** ุงูุตูุงุญูุงุช ูู ุฌุฏูู `permissions`

6. **ุฑุจุท ุงูุฏูุฑ ุจุงูุตูุงุญูุงุช** โ
   - ูุญุฐู ุงูุตูุงุญูุงุช ุงููุฏููุฉ ููุฏูุฑ
   - ูุถูู **ุฌููุน** ุงูุตูุงุญูุงุช ุฅูู ุฌุฏูู `role_permissions`

7. **ุงูุชุญูู** โ
   - ูุชุญูู ูู ุนุฏุฏ ุงูุตูุงุญูุงุช ุงูููุถุงูุฉ
   - ูุนุฑุถ ููุฎุต ูุงูู

---

## ๐ง ุงูุงุณุชุฎุฏุงู

### ุงูุชุซุจูุช ุงูุฃูู ูููุธุงู:

```bash
# 1. ุชุซุจูุช ุงูุญุฒู
npm install

# 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
cp .env.example .env
# ุญุฏูุซ ููู .env ุจุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

# 3. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run create-db

# 4. ุชุดุบูู ุงูู migrations
npm run migrate

# 5. ุฅูุดุงุก Super Admin
node scripts/create-admin.js
```

---

## ๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุนูุฏ ุชุดุบูู `node scripts/create-admin.js`:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุฅูุดุงุก ูุณุชุฎุฏู Super Admin ูุน ุฌููุน ุงูุตูุงุญูุงุช
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1๏ธโฃ  ุงูุจุญุซ ุนู ุฏูุฑ Admin...
   โ ุชู ุงูุนุซูุฑ ุนูู ุงูุฏูุฑ: Admin (4d9bef83-b64b-4842-b428-3381caf7c123)

2๏ธโฃ  ุงูุชุญูู ูู ุงููุณุชุฎุฏู ุงูููุฌูุฏ...
   โ ุชู ุญุฐู ุงููุณุชุฎุฏู ุงููุฏูู (ุฅู ูุฌุฏ)

3๏ธโฃ  ุชุดููุฑ ูููุฉ ุงููุฑูุฑ...
   โ ุชู ุชุดููุฑ ูููุฉ ุงููุฑูุฑ

4๏ธโฃ  ุฅูุดุงุก ุงููุณุชุฎุฏู...
   โ ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู: ูุฏูุฑ ุงููุธุงู ุงูุฑุฆูุณู
   ๐ง ุงูุจุฑูุฏ: admin@pipefy.com
   ๐ ุงููุนุฑู: a00a2f8e-2843-41da-8080-6eb4cd0a706b

5๏ธโฃ  ุฌูุจ ุฌููุน ุงูุตูุงุญูุงุช...
   โ ุชู ุงูุนุซูุฑ ุนูู 34 ุตูุงุญูุฉ

6๏ธโฃ  ุฑุจุท ุงูุฏูุฑ ุจุฌููุน ุงูุตูุงุญูุงุช...
   โ ุชู ุฑุจุท 34 ุตูุงุญูุฉ ุจุงูุฏูุฑ

7๏ธโฃ  ุงูุชุญูู ูู ุงูุตูุงุญูุงุช...
   โ ุงูุฏูุฑ ูุฏูู 34 ุตูุงุญูุฉ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชู ุฅูุดุงุก Super Admin ุจูุฌุงุญ!
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: admin@pipefy.com
๐ ูููุฉ ุงููุฑูุฑ: admin123
๐ค ุงูุงุณู: ูุฏูุฑ ุงููุธุงู ุงูุฑุฆูุณู
๐ ุงููุนุฑู: a00a2f8e-2843-41da-8080-6eb4cd0a706b
๐ญ ุงูุฏูุฑ: Admin
๐ ุนุฏุฏ ุงูุตูุงุญูุงุช: 34
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ก ููููู ุงูุขู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:
   POST http://localhost:3004/api/auth/login
   Body: { "email": "admin@pipefy.com", "password": "admin123" }

๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุชุณุฌูู ุงูุฏุฎูู:

```bash
curl -X 'POST' \
  'http://localhost:3004/api/auth/login' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "email": "admin@pipefy.com",
  "password": "admin123"
}'
```

### 2. ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "a00a2f8e-2843-41da-8080-6eb4cd0a706b",
      "name": "ูุฏูุฑ ุงููุธุงู ุงูุฑุฆูุณู",
      "email": "admin@pipefy.com",
      "role": {
        "id": "4d9bef83-b64b-4842-b428-3381caf7c123",
        "name": "Admin",
        "description": "ูุฏูุฑ ุงููุธุงู"
      },
      "permissions": [
        { "name": "users.manage", "resource": "users", "action": "manage" },
        { "name": "roles.manage", "resource": "roles", "action": "manage" },
        { "name": "processes.manage", "resource": "processes", "action": "manage" },
        { "name": "tickets.manage", "resource": "tickets", "action": "manage" },
        // ... ุฌููุน ุงูุตูุงุญูุงุช ุงูุฃุฎุฑู (34 ุตูุงุญูุฉ)
      ]
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "message": "ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ"
}
```

---

## ๐ ุงูุตูุงุญูุงุช ุงููููููุญุฉ

ุงููุณุชุฎุฏู ุณูุญุตู ุนูู **ุฌููุน** ุงูุตูุงุญูุงุช ุงูููุฌูุฏุฉ ูู ุงููุธุงูุ ุจูุง ูู ุฐูู:

### ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:
- โ `users.view` - ุนุฑุถ ุงููุณุชุฎุฏููู
- โ `users.create` - ุฅูุดุงุก ุงููุณุชุฎุฏููู
- โ `users.edit` - ุชุนุฏูู ุงููุณุชุฎุฏููู
- โ `users.delete` - ุญุฐู ุงููุณุชุฎุฏููู
- โ `users.manage` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

### ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ:
- โ `roles.view` - ุนุฑุถ ุงูุฃุฏูุงุฑ
- โ `roles.manage` - ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ

### ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช:
- โ `permissions.manage` - ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

### ุฅุฏุงุฑุฉ ุงูุนูููุงุช:
- โ `processes.read` - ูุฑุงุกุฉ ุงูุนูููุงุช
- โ `processes.create` - ุฅูุดุงุก ุงูุนูููุงุช
- โ `processes.update` - ุชุญุฏูุซ ุงูุนูููุงุช
- โ `processes.delete` - ุญุฐู ุงูุนูููุงุช
- โ `processes.manage` - ุฅุฏุงุฑุฉ ุงูุนูููุงุช
- โ `processes.view` - ุนุฑุถ ุงูุนูููุงุช

### ุฅุฏุงุฑุฉ ุงููุฑุงุญู:
- โ `stages.read` - ูุฑุงุกุฉ ุงููุฑุงุญู
- โ `stages.create` - ุฅูุดุงุก ุงููุฑุงุญู
- โ `stages.update` - ุชุญุฏูุซ ุงููุฑุงุญู
- โ `stages.delete` - ุญุฐู ุงููุฑุงุญู

### ุฅุฏุงุฑุฉ ุงูุญููู:
- โ `fields.read` - ูุฑุงุกุฉ ุงูุญููู
- โ `fields.create` - ุฅูุดุงุก ุงูุญููู
- โ `fields.update` - ุชุญุฏูุซ ุงูุญููู
- โ `fields.delete` - ุญุฐู ุงูุญููู

### ุฅุฏุงุฑุฉ ุงูุชุฐุงูุฑ:
- โ `tickets.read` - ูุฑุงุกุฉ ุงูุชุฐุงูุฑ
- โ `tickets.create` - ุฅูุดุงุก ุงูุชุฐุงูุฑ
- โ `tickets.update` - ุชุญุฏูุซ ุงูุชุฐุงูุฑ
- โ `tickets.manage` - ุฅุฏุงุฑุฉ ุงูุชุฐุงูุฑ
- โ `tickets.view_all` - ุนุฑุถ ุฌููุน ุงูุชุฐุงูุฑ
- โ `tickets.view_own` - ุนุฑุถ ุงูุชุฐุงูุฑ ุงูุฎุงุตุฉ
- โ `tickets.edit` - ุชุนุฏูู ุงูุชุฐุงูุฑ
- โ `tickets.delete` - ุญุฐู ุงูุชุฐุงูุฑ

### ุตูุงุญูุงุช ุฃุฎุฑู:
- โ `reports.view` - ุนุฑุถ ุงูุชูุงุฑูุฑ
- โ `integrations.manage` - ุฅุฏุงุฑุฉ ุงูุชูุงููุงุช
- โ `system.settings` - ุฅุนุฏุงุฏุงุช ุงููุธุงู

**ุงููุฌููุน:** ุฌููุน ุงูุตูุงุญูุงุช ุงูููุฌูุฏุฉ ูู ุงููุธุงู (34+ ุตูุงุญูุฉ)

---

## ๐ ุฅุนุงุฏุฉ ุงูุชุดุบูู

ุฅุฐุง ุงุญุชุฌุช ุฅุนุงุฏุฉ ุฅูุดุงุก ุงููุณุชุฎุฏู:

```bash
node scripts/create-admin.js
```

ุงูุณูุฑูุจุช ุณูููู ุจู:
1. ุญุฐู ุงููุณุชุฎุฏู ุงููุฏูู ุชููุงุฆูุงู
2. ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
3. ุฑุจุทู ุจุฌููุน ุงูุตูุงุญูุงุช

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ูุนูููุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ:
```
ุงูุจุฑูุฏ: admin@pipefy.com
ูููุฉ ุงููุฑูุฑ: admin123
```

### 2. ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:
โ๏ธ **ููู:** ุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุนุฏ ุฃูู ุชุณุฌูู ุฏุฎูู!

### 3. ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ:
โ๏ธ **ุชุญุฐูุฑ:** ูุง ุชุณุชุฎุฏู ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ!

### 4. Database Transaction:
โ ุงูุณูุฑูุจุช ูุณุชุฎุฏู transactions ูุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Admin role not found"
```bash
# ุชุฃูุฏ ูู ุชุดุบูู migrations ุฃููุงู
npm run migrate
```

### ุฎุทุฃ: "Connection refused"
```bash
# ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู .env
# ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL
```

### ุฎุทุฃ: "Permission denied"
```bash
# ุชุฃูุฏ ูู ุตูุงุญูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
# ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช CREATE/INSERT
```

---

## โ ุงูุญุงูุฉ

| ุงููููู | ุงูุญุงูุฉ |
|--------|--------|
| **ุงูุณูุฑูุจุช** | โ ูุญุฏูุซ |
| **ุฅูุดุงุก ุงููุณุชุฎุฏู** | โ ูุนูู |
| **ุฑุจุท ุงูุตูุงุญูุงุช** | โ ุชููุงุฆู |
| **ุฌููุน ุงูุตูุงุญูุงุช** | โ ูููููุญุฉ |
| **Transaction** | โ ุขูู |
| **ุงูุชูุซูู** | โ ููุชูู |

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุงูุขู ุนูุฏ ุชุดุบูู:
```bash
node scripts/create-admin.js
```

ุณุชุญุตู ุนูู:
- โ ูุณุชุฎุฏู Super Admin
- โ **ุฌููุน** ุงูุตูุงุญูุงุช (34+ ุตูุงุญูุฉ)
- โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุฑุงู
- โ ููููู ุฅุฏุงุฑุฉ ูู ุดูุก ูู ุงููุธุงู

**ุงููุธุงู ุฌุงูุฒ ููุนูู!** ๐
