# ๐ ููุฒุฉ "ููู ุฅูู ุนูููุฉ" - ุฏููู ุดุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ุชุณูุญ ุจููู ุงูุชุฐุงูุฑ ูู ุนูููุฉ ุฅูู ุนูููุฉ ุฃุฎุฑูุ ูุดุงุจูุฉ ูููุฒุฉ "ููู ุฅูู ูุฑุญูุฉ" ุงูููุฌูุฏุฉ.

---

## โ ูุง ุชู ุชุทุจููู

### 1. Backend (ticketService.ts)

#### ุฏุงูุฉ ุฌุฏูุฏุฉ:
```typescript
async moveTicketToProcess(id: string, targetProcessId: string): Promise<ApiResponse<Ticket>> {
  try {
    const response = await apiClient.post(`${this.endpoint}/${id}/move-to-process`, {
      target_process_id: targetProcessId
    });
    return response;
  } catch (error) {
    console.error(`ุฎุทุฃ ูู ููู ุงูุชุฐูุฑุฉ ${id} ุฅูู ุนูููุฉ:`, error);
    throw error;
  }
}
```

**API Endpoint ุงููุณุชุฎุฏู**:
```
POST /api/tickets/{id}/move-to-process
Body: { "target_process_id": "uuid" }
```

---

### 2. Frontend (TicketModal.tsx)

#### States ุฌุฏูุฏุฉ:
```typescript
const [showProcessSelector, setShowProcessSelector] = useState(false);
const [selectedProcessId, setSelectedProcessId] = useState('');
const [isMovingToProcess, setIsMovingToProcess] = useState(false);
const [allProcesses, setAllProcesses] = useState<Process[]>([]);
const [isLoadingProcesses, setIsLoadingProcesses] = useState(false);
```

#### ุฏุงูุฉ ุฌูุจ ุงูุนูููุงุช:
```typescript
const loadAllProcesses = async () => {
  setIsLoadingProcesses(true);
  try {
    // ุงุณุชุฎุฏุงู processes ูู WorkflowContext
    if (processes && processes.length > 0) {
      setAllProcesses(processes);
    }
  } finally {
    setIsLoadingProcesses(false);
  }
};
```

#### ุฏุงูุฉ ููู ุงูุชุฐูุฑุฉ:
```typescript
const handleMoveToProcess = async () => {
  if (!selectedProcessId || isMovingToProcess) return;
  
  try {
    setIsMovingToProcess(true);
    const response = await ticketService.moveTicketToProcess(ticket.id, selectedProcessId);
    
    if (response.success) {
      alert('ุชู ููู ุงูุชุฐูุฑุฉ ุฅูู ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ ุจูุฌุงุญ!');
      setShowProcessSelector(false);
      onClose();
      window.location.reload();
    }
  } catch (error) {
    alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ููู ุงูุชุฐูุฑุฉ');
  } finally {
    setIsMovingToProcess(false);
  }
};
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### 1. ุฒุฑ "ููู ุฅูู ุนูููุฉ"

ูุธูุฑ ูู Header ุงูุชุฐูุฑุฉ ุจุฌุงูุจ ุฒุฑ "ููู ุฅูู ูุฑุญูุฉ":

```tsx
<button
  onClick={() => setShowProcessSelector(true)}
  className="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg"
>
  <RefreshCw className="w-4 h-4" />
  <span>ููู ุฅูู ุนูููุฉ</span>
</button>
```

**ุงูุดูู**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ููู ุฅูู ูุฑุญูุฉ] [ููู ุฅูู ุนูููุฉ] [ร]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 2. Modal ุงุฎุชูุงุฑ ุงูุนูููุฉ

ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑุ ูุธูุฑ Modal ุฌููู ูุญุชูู ุนูู:

#### ุฃ. ูุนูููุงุช ุงูุนูููุฉ ุงูุญุงููุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ฏ ุงูุนูููุฉ ุงูุญุงููุฉ: ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน โ
โ ูุตู ุงูุนูููุฉ...                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุจ. ูุงุฆูุฉ ุงูุนูููุงุช ุงููุชุงุญุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงุฎุชุฑ ุงูุนูููุฉ ุงููุณุชูุฏูุฉ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ุนูููุฉ ุงูุชุทููุฑ                    โ
โ   ูุตู ุงูุนูููุฉ                       โ
โ   [5 ูุฑุญูุฉ] [ูุดุท]                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ุนูููุฉ ุงูุชุตููู                    โ
โ   ูุตู ุงูุนูููุฉ                       โ
โ   [3 ูุฑุญูุฉ] [ูุดุท]                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุฌ. ุฑุณุงูุฉ ุชุญุฐูุฑ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ุชูุจูู                             โ
โ ุณูุชู ููู ุงูุชุฐูุฑุฉ ุฅูู ุงูุนูููุฉ       โ
โ ุงูุฌุฏูุฏุฉ ูุณูุชู ุชุญุฏูุซ ุฌููุน ุงูุจูุงูุงุช  โ
โ ุงููุฑุชุจุทุฉ ุจูุง. ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู  โ
โ ุงูุชุฑุงุฌุน ุนูู.                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุฏ. ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุก:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ ุชูููุฐ ุงูููู]                   โ
โ [ุฅูุบุงุก]                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### ุงูุฎุทูุงุช:

1. **ูุชุญ ุงูุชุฐูุฑุฉ**
   ```
   ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุชุฐูุฑุฉ ูู Kanban
   ```

2. **ุงูุถุบุท ุนูู "ููู ุฅูู ุนูููุฉ"**
   ```
   ููุชุญ Modal ุงุฎุชูุงุฑ ุงูุนูููุฉ
   โ
   ูุชู ุฌูุจ ุฌููุน ุงูุนูููุงุช ูู WorkflowContext
   ```

3. **ุงุฎุชูุงุฑ ุงูุนูููุฉ ุงููุณุชูุฏูุฉ**
   ```
   ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุนูููุฉ ูู ุงููุงุฆูุฉ
   โ
   ุชุธูุฑ ุฑุณุงูุฉ ุงูุชุญุฐูุฑ
   ```

4. **ุชูููุฐ ุงูููู**
   ```
   ุงููุณุชุฎุฏู ูุถุบุท "ุชูููุฐ ุงูููู"
   โ
   ูุชู ุฅุฑุณุงู POST /api/tickets/{id}/move-to-process
   โ
   ุฅุฐุง ูุฌุญ: ุฑุณุงูุฉ ูุฌุงุญ + ุฅุบูุงู Modal + ุชุญุฏูุซ ุงูุตูุญุฉ
   โ
   ุฅุฐุง ูุดู: ุฑุณุงูุฉ ุฎุทุฃ
   ```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุฃุณุงุณู:

```bash
# 1. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
Ctrl+Shift+R

# 2. ุงูุชุญ ุชุฐูุฑุฉ
ุงุถุบุท ุนูู ุฃู ุชุฐูุฑุฉ ูู Kanban

# 3. ุชุญูู ูู ุงูุฒุฑ
ูุฌุจ ุฃู ุชุฑู ุฒุฑ "ููู ุฅูู ุนูููุฉ" ูู Header
```

### 2. ุงุฎุชุจุงุฑ Modal:

```bash
# 1. ุงุถุบุท ุนูู "ููู ุฅูู ุนูููุฉ"
ูุฌุจ ุฃู ููุชุญ Modal

# 2. ุชุญูู ูู ุงููุญุชูู
โ ูุนูููุงุช ุงูุนูููุฉ ุงูุญุงููุฉ ุชุธูุฑ
โ ูุงุฆูุฉ ุงูุนูููุงุช ุงููุชุงุญุฉ ุชุธูุฑ
โ ุงูุนูููุฉ ุงูุญุงููุฉ ูุณุชุจุนุฏุฉ ูู ุงููุงุฆูุฉ
```

### 3. ุงุฎุชุจุงุฑ ุงูููู:

```bash
# 1. ุงุฎุชุฑ ุนูููุฉ
ุงุถุบุท ุนูู ุฃู ุนูููุฉ ูู ุงููุงุฆูุฉ

# 2. ุชุญูู ูู ุงูุชุญุฐูุฑ
ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุงูุชุญุฐูุฑ

# 3. ุงุถุบุท "ุชูููุฐ ุงูููู"
ูุฌุจ ุฃู ูุชู:
โ ุฅุฑุณุงู request ุฅูู API
โ ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ
โ ุฅุบูุงู Modal
โ ุชุญุฏูุซ ุงูุตูุญุฉ
```

---

## ๐ ููุงุฑูุฉ ูุน "ููู ุฅูู ูุฑุญูุฉ"

| ุงูููุฒุฉ | ููู ุฅูู ูุฑุญูุฉ | ููู ุฅูู ุนูููุฉ |
|--------|---------------|----------------|
| **ุงูุฒุฑ** | "ููู ุฅูู ูุฑุญูุฉ" | "ููู ุฅูู ุนูููุฉ" |
| **ุงูุฃููููุฉ** | ArrowRight | RefreshCw |
| **API** | POST /move-simple | POST /move-to-process |
| **ุงูุฎูุงุฑุงุช** | ูุฑุงุญู ุงูุนูููุฉ ุงูุญุงููุฉ | ุฌููุน ุงูุนูููุงุช |
| **ุงูููุชุฑุฉ** | allowed_transitions | ุงุณุชุจุนุงุฏ ุงูุนูููุฉ ุงูุญุงููุฉ |
| **ุงูุชุญุฐูุฑ** | ูุง ููุฌุฏ | ููุฌุฏ โ |
| **ุจุนุฏ ุงูููู** | ุชุญุฏูุซ State ููุท | ุชุญุฏูุซ ุงูุตูุญุฉ ูุงููุฉ |

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ูุง ูุนูู:

1. **ุนุฑุถ ุฌููุน ุงูุนูููุงุช**
   - ูุฌูุจ ูู WorkflowContext
   - ูุณุชุจุนุฏ ุงูุนูููุฉ ุงูุญุงููุฉ ุชููุงุฆูุงู

2. **ูุงุฌูุฉ ุฌูููุฉ**
   - ุชุตููู ูุดุงุจู ูู "ููู ุฅูู ูุฑุญูุฉ"
   - ุฃููููุงุช ูุฃููุงู ูุชูุงุณูุฉ
   - ุงููููุดู ุณูุณ

3. **ุชุญุฐูุฑ ูุงุถุญ**
   - ูุธูุฑ ุนูุฏ ุงุฎุชูุงุฑ ุนูููุฉ
   - ููุถุญ ุฃู ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู

4. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
   - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
   - ูุนุงูุฌุฉ ุญุงูุงุช ุงููุดู

5. **ุชุญุฏูุซ ุชููุงุฆู**
   - ุชุญุฏูุซ ุงูุตูุญุฉ ุจุนุฏ ุงูููู ุงููุงุฌุญ
   - ูุถูู ุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ

---

## ๐ง ุงูุชุฎุตูุต

### ุชุบููุฑ ุฑุณุงูุฉ ุงููุฌุงุญ:

```typescript
// ูู handleMoveToProcess
alert('ุชู ููู ุงูุชุฐูุฑุฉ ุฅูู ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ ุจูุฌุงุญ!');
// ูููู ุงุณุชุจุฏุงููุง ุจู:
notifications.showSuccess('ูุฌุญ ุงูููู', 'ุชู ููู ุงูุชุฐูุฑุฉ ุจูุฌุงุญ');
```

### ุชุบููุฑ ุณููู ูุง ุจุนุฏ ุงูููู:

```typescript
// ุจุฏูุงู ูู:
window.location.reload();

// ูููู:
// 1. ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช ููุท
await refreshTickets();

// 2. ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุฃุฎุฑู
navigate(`/process/${selectedProcessId}`);

// 3. ุฅุบูุงู Modal ููุท
onClose();
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุนูููุฉ ุงูุญุงููุฉ:
- **ูุชู ุงุณุชุจุนุงุฏูุง ุชููุงุฆูุงู** ูู ูุงุฆูุฉ ุงูุนูููุงุช ุงููุชุงุญุฉ
- ูุง ูููู ููู ุงูุชุฐูุฑุฉ ุฅูู ููุณ ุงูุนูููุฉ

### 2. ุงูุตูุงุญูุงุช:
- ูุฌุจ ุงูุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ ููู ุงูุชุฐุงูุฑ
- ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู Backend

### 3. ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ:
- ุนูุฏ ููู ุงูุชุฐูุฑุฉุ ูุชู ุชุญุฏูุซ:
  - `process_id`
  - `current_stage_id` (ุฅูู ุฃูู ูุฑุญูุฉ ูู ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ)
  - ุฃู ุจูุงูุงุช ุฃุฎุฑู ูุฑุชุจุทุฉ

### 4. ุงูุชุนูููุงุช:
- ูููุตุญ ุจุฅุถุงูุฉ ุชุนููู ุชููุงุฆู ุนูุฏ ุงูููู (ูุซู ููู ุงููุฑุงุญู)
- ูููู ุฅุถุงูุฉ ูุฐุง ูู Backend

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุธูุฑ ุฒุฑ "ููู ุฅูู ุนูููุฉ"

**ุงูุญู**:
1. ุชุฃูุฏ ูู ุชุญุฏูุซ ุงูุตูุญุฉ (Ctrl+Shift+R)
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุฃู `ticketService` ุชู ุงุณุชูุฑุงุฏู

### ุงููุดููุฉ: Modal ูุงุฑุบ ุฃู ูุง ุชูุฌุฏ ุนูููุงุช

**ุงูุญู**:
1. ุชุญูู ูู ุฃู `processes` ูุชููุฑ ูู WorkflowContext
2. ุงูุชุญ Console ูุงุจุญุซ ุนู "ุนุฏุฏ ุงูุนูููุงุช"
3. ุชุฃูุฏ ูู ุฃู ููุงู ุนูููุงุช ุฃุฎุฑู ุบูุฑ ุงูุนูููุฉ ุงูุญุงููุฉ

### ุงููุดููุฉ: ุฎุทุฃ ุนูุฏ ุงูููู

**ุงูุญู**:
1. ุงูุชุญ Network tab ูู Console
2. ุงุจุญุซ ุนู request ุฅูู `/move-to-process`
3. ุชุญูู ูู response
4. ุชุฃูุฏ ูู ุฃู API endpoint ููุฌูุฏ ูู Backend

---

## ๐ ุงูุฎูุงุตุฉ

### ุชู ุฅุถุงูุฉ:
- โ ุฒุฑ "ููู ุฅูู ุนูููุฉ" ูู Header ุงูุชุฐูุฑุฉ
- โ Modal ุฌููู ูุงุฎุชูุงุฑ ุงูุนูููุฉ
- โ ุฏุงูุฉ `moveTicketToProcess` ูู ticketService
- โ ูุนุงูุฌุฉ ูุงููุฉ ููุฃุฎุทุงุก
- โ ุฑุณุงุฆู ุชุญุฐูุฑ ูุงุถุญุฉ
- โ ุชุญุฏูุซ ุชููุงุฆู ุจุนุฏ ุงูููู

### ุงููุชูุฌุฉ:
**ูุธุงู ูุงูู ููุชูุงูู ูููู ุงูุชุฐุงูุฑ ุจูู ุงูุนูููุงุช! ๐**

---

**ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ ูุฌุฑุจ ุงูุขู! ๐**
